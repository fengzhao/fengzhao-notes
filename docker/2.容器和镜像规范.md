# å¼€æ”¾å®¹å™¨è®¡åˆ’



**å¼€æ”¾å®¹å™¨è®¡åˆ’ (OCI)** æ˜¯ä¸€ä¸ªè½»é‡çº§ã€å¼€æ”¾çš„æ²»ç†ç»“æ„ï¼ˆé¡¹ç›®ï¼‰ï¼Œåœ¨ Linux åŸºé‡‘ä¼šçš„æ”¯æŒä¸‹ï¼Œç”±äº 2015 å¹´ 6 æœˆ 22 æ—¥ç”± Dockerã€CoreOS å’Œå…¶ä»–å®¹å™¨è¡Œä¸šçš„é¢†å¯¼è€…æ¨å‡ºæˆç«‹ã€‚

æ—¨åœ¨å›´ç»•å®¹å™¨æ ¼å¼å’Œè¿è¡Œæ—¶åˆ›å»ºå¼€æ”¾çš„è¡Œä¸šæ ‡å‡†ã€‚

OCIæ ‡å‡†è§„èŒƒçš„è¯ç”Ÿï¼ŒæŠ›å¼€å®ƒæˆç«‹çš„å•†ä¸šç›®çš„ä¸æï¼ŒOCIæœ¬èº«å­˜åœ¨çš„æ„ä¹‰åœ¨äºä¸ºç¤¾åŒºæä¾›ä¸€å¥—å›´ç»•ç€å®¹å™¨é•œåƒè§„èŒƒå’Œruntimeè§„èŒƒçš„å·¥ä¸šçº§æ ‡å‡†ã€‚

ç›®å‰ OCI ä¸»è¦æœ‰ä¸‰ä¸ªè§„èŒƒï¼š**è¿è¡Œæ—¶è§„èŒƒ** [runtime-spec](https://github.com/opencontainers/runtime-spec) ï¼Œ**é•œåƒè§„èŒƒ** [image-spec](https://www.github.com/opencontainers/image-spec) ä»¥åŠä¸å¸¸è§çš„**é•œåƒä»“åº“è§„èŒƒ** [distribution-spec](https://github.com/opencontainers/distribution-spec) ã€‚

å…¶å® OCI è§„èŒƒå°±æ˜¯ä¸€å † markdown æ–‡ä»¶å•¦ï¼Œå†…å®¹ä¹Ÿå¾ˆå®¹æ˜“ç†è§£ï¼Œä¸åƒ RFC å’Œ ISO é‚£ä¹ˆé«˜æ·±è«æµ‹ï¼Œæ‰€ä»¥å¦‚æœæƒ³å¯¹å®¹å™¨é•œåƒæœ‰ä¸ªæ·±å…¥çš„äº†è§£è¿˜æ˜¯æ¨èå¤§å®¶å»è¯»ä¸€ä¸‹è¿™äº› markdown æ–‡ä»¶ğŸ˜‚ã€‚



## é•œåƒè§„èŒƒ



OCIé•œåƒè§„èŒƒå®šä¹‰äº†å¦‚ä½•å»åˆ›å»ºOCIé•œåƒï¼Œæºæ–‡ä»¶è§„èŒƒå†…å®¹å¦‚ä¸‹ï¼š

```
â”œâ”€â”€ annotations.md         # æ³¨è§£è§„èŒƒ
â”œâ”€â”€ config.md              # image config æ–‡ä»¶è§„èŒƒ
â”œâ”€â”€ considerations.md      # æ³¨æ„äº‹é¡¹
â”œâ”€â”€ conversion.md          # è½¬æ¢ä¸º OCI è¿è¡Œæ—¶
â”œâ”€â”€ descriptor.md          # OCI Content Descriptors å†…å®¹æè¿°
â”œâ”€â”€ image-index.md         # manifest list æ–‡ä»¶
â”œâ”€â”€ image-layout.md        # é•œåƒçš„å¸ƒå±€
â”œâ”€â”€ implementations.md     # ä½¿ç”¨ OCI è§„èŒƒçš„é¡¹ç›®
â”œâ”€â”€ layer.md               # é•œåƒå±‚ layer è§„èŒƒ
â”œâ”€â”€ manifest.md            # manifest è§„èŒƒ
â”œâ”€â”€ media-types.md         # æ–‡ä»¶ç±»å‹
â”œâ”€â”€ README.md              # README æ–‡æ¡£
â”œâ”€â”€ spec.md                # OCI é•œåƒè§„èŒƒçš„æ¦‚è§ˆ
```





### æ³¨è§£è§„èŒƒ



ä½¿ç”¨è§„åˆ™

- Annotationså¿…é¡»æ˜¯é”®å€¼å¯¹ï¼Œå…¶ä¸­é”®å¿…é¡»æ˜¯stringç±»å‹çš„ã€‚
- é”®å¿…é¡»å”¯ä¸€ï¼Œæœ€ä½³å®è·µæ˜¯ä½¿ç”¨å‘½åç©ºé—´ï¼Œå°†å…¶åšåŒºåˆ†ã€‚
- å€¼å¿…é¡»å­˜åœ¨ï¼Œä½†æ˜¯å¯ä»¥æ˜¯ç©ºå­—ç¬¦ä¸²ã€‚
- org.opencontainerså‰ç¼€çš„é”®æ˜¯OCIè§„èŒƒçš„ï¼Œä¸è¦éšä¾¿ç”¨ã€‚
- org.opencontainers.imageå‰ç¼€çš„é”®æ˜¯OCIé•œåƒè§„èŒƒçš„ï¼Œä¸è¦éšä¾¿ç”¨ã€‚
- ä½¿ç”¨é•œåƒæ—¶ï¼Œä¸è¦å› ä¸ºé‡åˆ°äº†æœªçŸ¥çš„æ³¨è§£ï¼Œè€Œç›´æ¥æŠ›å‡ºé”™è¯¯ã€‚
- é¢„å®šä¹‰çš„ä¸€äº›æ³¨è§£
  - org.opencontainers.image.created é•œåƒæ„å»ºçš„æ—¥æœŸ (string, RFC 3339)ã€‚
  - org.opencontainers.image.authors é•œåƒçš„è´Ÿè´£äººæˆ–ç»„ç»‡ (string)
  - org.opencontainers.image.homepage é•œåƒç›¸å…³ä¿¡æ¯åœ°å€ (string, URL)
  - org.opencontainers.image.documentation é•œåƒå¸®åŠ©æ–‡æ¡£åœ°å€ (string, URL)
  - org.opencontainers.image.source é•œåƒæºä»£ç åœ°å€ (string, URL)
  - org.opencontainers.image.ref.name é•œåƒåç§°ï¼ˆTagï¼‰ (string) 



å…¶ä»–éœ€è¦è€ƒè™‘çš„é—®é¢˜
  å¯æ‰©å±•æ€§
    ä¸ºäº†ä¿è¯å¯æ‰©å±•æ€§ã€‚ä½¿ç”¨è¯¥è§„èŒƒçš„å®ç°ï¼Œä¸èƒ½å› ä¸ºè·å–åˆ°äº†ä¸€äº›è§„èŒƒä¹‹å¤–çš„å±æ€§ï¼Œè€Œäº§ç”Ÿé”™è¯¯æˆ–è€…æ˜¯å¼‚å¸¸ã€‚

è§„èŒƒåŒ–
OCI é•œåƒæ˜¯åŸºäºå†…å®¹å¯»å€çš„ã€‚
å†…å®¹å¯»å€çš„ä¸€å¤§å¥½å¤„å°±æ˜¯å¯ä»¥å…±äº«é‡å¤çš„æ•°æ®ã€‚
å¤šä¸ªé•œåƒä¾èµ–åŒä¸€ä¸ªå±‚æ—¶ï¼Œè¿™ä¸ªå±‚åªä¼šå­˜å‚¨ä¸€ä»½ã€‚
ä½¿ç”¨ä¸åŒçš„åºåˆ—åŒ–ç®—æ³•æ—¶ï¼Œè¯­ä¹‰ä¸Šä¸€æ ·çš„å±‚å¾€å¾€ä¼šå¾—åˆ°ä¸ç”¨çš„Hashå€¼ï¼Œè¿™æ ·çš„è¯è¿™æ ·è¯­ä¹‰ä¸Šä¸€æ ·çš„å±‚å°±ä¼šè¢«å­˜å‚¨ä¸¤ä»½ã€‚è¿™ä¸¤ä»½æ˜¯ä¸€æ ·çš„ã€‚
ä¸ºäº†ä¿è¯é«˜æ•ˆå­˜å‚¨ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨æƒå¨çš„åºåˆ—åŒ–æ–¹å¼ã€‚
è¿™æ ·çš„è¯å¤šä¸ªä¸åŒçš„è¯¥è§„èŒƒå®ç°åœ¨æ¨é€æ—¶è¡¨ç°å‡ºæ¥çš„è¡Œä¸ºå°†ä¼šæ˜¯ä¸€è‡´çš„ã€‚
è®¸å¤šç»„ä»¶éƒ½æ˜¯JSONæ ¼å¼çš„ï¼Œè¿™é‡Œä¹Ÿåº”è¯¥ä½¿ç”¨æƒå¨çš„åºåˆ—åŒ–æ–¹å¼ã€‚







æ¯”å¦‚ï¼Œæˆ‘ä»¬ç¼–å†™ dockerfile æ—¶ï¼Œå°±å¯ä»¥éµå¾ªæ³¨è§£è§„èŒƒï¼Œ

```dockerfile
FROM funnyzak/alpine-cron

ARG BUILD_DATE
ARG VCS_REF

LABEL org.label-schema.vendor="funnyzak<silenceace@gmail.com>" \
    org.label-schema.name="mysql backup and notify" \
    org.label-schema.build-date="${BUILD_DATE}" \
    org.label-schema.description="This image is based on Alpine Linux image, which is only a 28MB image." \
    org.label-schema.docker.cmd="docker run --name=backdb -d --restart=always  -e 'DB_HOST=db-container'  -e 'DB_PORT=3306'  -e 'DB_USER=potato'  -e 'DB_PASSWORD=123456'  -e 'DB_NAMES=wordpress_db ghost_db'  -e 'DUMP_FILE_EXPIRE_DAY=30'  -e 'DB_DUMP_CRON=0 0 * * *'  -v '/local/path/db:/db'  funnyzak/mysql-backup" \
    org.label-schema.url="https://yycc.me" \
    org.label-schema.version="1.0.0" \
    org.label-schema.schema-version="1.0"	\
    org.label-schema.vcs-type="Git" \
    org.label-schema.vcs-ref="${VCS_REF}" \
    org.label-schema.vcs-url="https://github.com/funnyzak/mysql-backup-docker" 
```

