##  åŒ…å’Œæ–‡ä»¶

golang ä»¥åŒ…æ¥ç»„ç»‡ç¨‹åºï¼ŒåŒ…ç±»ä¼¼äºå…¶ä»–è¯­è¨€ä¸­çš„åº“ï¼Œä¸€ä¸ªåŒ…ç”±ä¸€ä¸ªæˆ–å¤šä¸ª .go ä¸ºæ–‡ä»¶ååç¼€çš„æºä»£ç æ–‡ä»¶ç»„æˆã€‚

æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œæ–‡ä»¶å¤¹æè¿°äº†åŒ…åçš„ä½œç”¨ã€‚**ä¸€èˆ¬ç”¨æ–‡ä»¶å¤¹ååšä¸ºåŒ…å**

æ¯ä¸€ä¸ª .go æ–‡ä»¶éƒ½**å±äºä¸”ä»…å±äº**ä¸€ä¸ªåŒ…ã€‚ï¼ˆå¾ˆæ˜¾ç„¶ï¼‰

å³  \go\src\net æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå°±æ˜¯æ˜¯ä¸€ä¸ªåŒ…ï¼Œè¿™ä¸ªåŒ…åå« net  ï¼Œnet ç›®å½•é‡Œé¢ go æ–‡ä»¶éƒ½è¦å£°æ˜ package net 

æ¯ä¸€ä¸ªæºæ–‡ä»¶ä¸­ç¬¬ä¸€è¡Œä½¿ç”¨ package æ¥å£°æ˜è¿™ä¸ªæ–‡ä»¶æ‰€å±çš„åŒ…ã€‚åé¢è·Ÿä¸Š import å…³é”®å­—æ¥å¯¼å…¥å…¶ä»–åŒ…ã€‚

ä¾‹å¦‚ ï¼šgopl.io/ch1/helloworld è¿™ä¸ªåŒ…å¯¹åº”çš„ç›®å½•è·¯å¾„æ˜¯ $GOPATH/src/gopl.io/ch1/helloworld

æ¯ä¸ªåŒ…æä¾›äº†ç‹¬ç«‹çš„ **å‘½åç©ºé—´**ã€‚åŒ…å†…çš„æ ‡è¯†ç¬¦éœ€è¦é€šè¿‡å¤§å†™å­—æ¯å¼€å¤´æ¥è¡¨ç¤ºå¯ä»¥è¢«å¤–éƒ¨åŒ…å¼•ç”¨ã€‚

å¼•ç”¨å¤–éƒ¨åŒ…ä¸­çš„å˜é‡æˆ–å‡½æ•°æ—¶ï¼Œä¸€èˆ¬é€šè¿‡ **package.Identifier** è¿™æ ·çš„æ ¼å¼å¼•ç”¨

åŒ…å¯ä»¥çœ‹åšä¸€ä¸ªç±»åº“æˆ–è€…å‘½åç©ºé—´ï¼Œå½“åœ¨ä¸€ä¸ª .go æ–‡ä»¶é‡Œå¯¼å…¥ä¸€ä¸ªåŒ…åï¼Œå°±å¯ä»¥ä½¿ç”¨è¯¥åŒ…é‡Œé¢çš„å¸¸é‡ã€å˜é‡ã€ç±»å‹ã€å‡½æ•°åã€ç»“æ„å­—æ®µç­‰ç­‰ã€‚

### MainåŒ…

åœ¨ go ä¸­ï¼Œå‘½åä¸º main çš„åŒ…å…·æœ‰ç‰¹æ®Šå«ä¹‰ï¼ŒGo è¯­è¨€çš„ç¼–è¯‘ç¨‹åºä¼šè¯•å›¾æŠŠè¿™ç§åå­—çš„åŒ…ç¼–è¯‘ä¸ºäºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ã€‚

**æ‰€æœ‰ç”¨ Go è¯­è¨€ç¼–è¯‘çš„å¯æ‰§è¡Œç¨‹åºéƒ½å¿…é¡»æœ‰ä¸€ä¸ªåå« main çš„åŒ…ã€‚**

**åœ¨ go è¯­è¨€é‡Œï¼ŒåŒæ—¶è¦æ»¡è¶³`main`åŒ…å’ŒåŒ…å«`main()`å‡½æ•°ï¼Œæ‰ä¼šè¢«ç¼–è¯‘æˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚**

main å‡½æ•°æ˜¯ç¨‹åºå…¥å£ã€‚ç¨‹åºç¼–è¯‘æ—¶ï¼Œ**ä¼šä½¿ç”¨å£°æ˜ main åŒ…çš„ä»£ç æ‰€åœ¨çš„ç›®å½•çš„ç›®å½•åä½œä¸ºäºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶çš„æ–‡ä»¶åã€‚**

```go
//  $GOPATH/src/hello/main.go

package main

import "fmt"

func main() {
	fmt.Println("Hello World!")
}

// ç»ˆç«¯è¿›åˆ°helloç›®å½•ä¸‹ï¼Œgo build 

// è¿™æ¡å‘½ä»¤æ‰§è¡Œå®Œåï¼Œä¼šç”Ÿæˆä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ã€‚
// åœ¨ UNIXã€Linux å’Œ Mac OS X ç³»ç»Ÿä¸Šï¼Œè¿™ä¸ªæ–‡ä»¶ä¼šå‘½åä¸º helloï¼Œ
// è€Œåœ¨ Windows ç³»ç»Ÿä¸Šä¼šå‘½åä¸º hello.exeã€‚å¯ä»¥æ‰§è¡Œè¿™ä¸ªç¨‹åºï¼Œå¹¶åœ¨æ§åˆ¶å°ä¸Šæ˜¾ç¤ºâ€œHelloWorld!â€ã€‚

// å¦‚æœå°†åŒ…åæ”¹ä¸ºé 
```



### å¯¼åŒ…

æ¯ä¸ªè¯­è¨€éƒ½æœ‰å¯¼åŒ…æœºåˆ¶ï¼Œgolang ä¹Ÿä¸ä¾‹å¤–ï¼Œåœ¨ go æºæ–‡ä»¶ä¸­ï¼Œä½¿ç”¨ import å…³é”®å­—æ¥å¯¼åŒ…ã€‚

å¦‚æœä½ çš„åŒ…å¼•å…¥äº†ä¸‰ç§ç±»å‹çš„åŒ…ï¼Œæ ‡å‡†åº“åŒ…ï¼Œç¨‹åºå†…éƒ¨åŒ…ï¼Œç¬¬ä¸‰æ–¹åŒ…ï¼Œå»ºè®®é‡‡ç”¨å¦‚ä¸‹æ–¹å¼è¿›è¡Œç»„ç»‡ä½ çš„åŒ…:

- æ ‡å‡†åº“åŒ…ï¼ˆæœ‰è¶…è¿‡ä¸€ç™¾å¤šä¸ªåŒ…ï¼Œä½¿ç”¨ go list std åˆ—å‡ºæ‰€æœ‰æ ‡å‡†åº“åŒ…ï¼‰
- ç¨‹åºå†…éƒ¨åŒ… ä» gopath ç¯å¢ƒå˜é‡çš„è·¯å¾„ä¸­æŸ¥æ‰¾
- ç¬¬ä¸‰æ–¹åŒ… 

**å¯¼åŒ…ä¼˜å…ˆçº§ï¼š go ç¼–è¯‘å™¨è¯»åˆ°ä¸€ä¸ª import å…³é”®å­—å¯¼åŒ…çš„æ—¶å€™ï¼ŒæŒ‰ç…§ä¸Šè¿°é¡ºåºå¯¼å…¥ï¼Œä¸€æ—¦æ‰¾åˆ°æ»¡è¶³è¦æ±‚çš„ï¼Œå°±åœæ­¢æŸ¥æ‰¾ã€‚**

```go
// æ ‡å‡†åº“åŒ…  /usr/local/go/src/pkg/net/http
// å†…éƒ¨åŒ…   /home/myproject/src/net/http
// ç¬¬ä¸‰æ–¹åŒ… /home/mylibraries/src/net/http

//å¯¼åŒ…æ–¹æ³•
//å¯¼ä¸€ä¸ªåŒ…ï¼Œæ ‡å‡†åº“ä¸­çš„åŒ…
import "fmt"


//å¯¼å¤šä¸ªåŒ…
import (
   "fmt"
   "os"
)


// å¯¼å½“å‰å·¥ç¨‹ä¸‹çš„è‡ªå®šä¹‰åŒ…
import "pk1/pk2"



// å¯¼åŒ…è§„èŒƒï¼šæœ‰é¡ºåºçš„å¼•å…¥åŒ…, ä¸åŒçš„ç±»å‹é‡‡ç”¨ç©ºæ ¼åˆ†ç¦»:
	// ç¬¬ä¸€ç§æ˜¯æ ‡å‡†åº“    /usr/local/go/src/net/http
	// ç¬¬äºŒç§æ˜¯é¡¹ç›®åŒ…    /home/myproject/src/net/http
	// ç¬¬ä¸‰ç§æ˜¯ç¬¬ä¸‰æ–¹åŒ…. è¿œç¨‹å¯¼å…¥ï¼Œå¯¼å…¥è·¯å¾„æ˜¯ä¸€ä¸ªè¿œç¨‹URLï¼Œä½¿ç”¨ go get ä¸‹è½½åˆ° gopath/src/github.com/astaxie/beego è¿™ä¸ªè·¯å¾„
import (
    "encoding/json"
    "strings"

    "myproject/models"
    "myproject/controller"
    "myproject/utils"

    "github.com/astaxie/beego"
    "github.com/go-sql-driver/mysql"
)
```

#### å¯¼åŒ…åˆ«å

åœ¨å¯¼å¾ˆé•¿çš„åŒ…åæ—¶ï¼Œä½¿ç”¨ç®€å•çš„åˆ«åæ–¹å¼æ¥ç¼©çŸ­å¼•ç”¨ã€‚

```go
// å¯¼å¤–éƒ¨åŒ…å–ä¸€ä¸ªåˆ«åï¼Œè°ƒç”¨è¿™ä¸ªå¤–éƒ¨åŒ…çš„å¯¼å‡ºå‡½æ•°æ—¶ï¼Œä½¿ç”¨ åˆ«å.å‡½æ•°å çš„æ ¼å¼è°ƒç”¨
import dg "github.com/bwmarrin/discordgo"

func main() {
    err := dg.New()
}

// å¯¼åŒ…é¿å…å†²çªï¼Œå½“ä¸¤ä¸ªåŒ…æœ‰ä¸€æ ·çš„åå­—æ—¶ï¼Œå¯ä»¥å–ä¸€ä¸ªåˆ«åæ¥å¤„ç†å†²çªé—®é¢˜
// å¼•ç”¨åŒ…å†…å˜é‡å’Œå‡½æ•°æ—¶ï¼Œå¯ä»¥ä½¿ç”¨åˆ«åå¼•ç”¨
import (
    "math/rand"
    crand "crypto/rand"
)
```

#### ç©ºå¯¼å…¥

åœ¨ golang ä¸­ï¼Œ**`å¯¼å…¥ä¸€ä¸ªåŒ…è€Œä¸ç”¨`å’Œ`å‡½æ•°å†…å£°æ˜å˜é‡ä½†æ˜¯å¹¶ä¸ä½¿ç”¨`ä¸€æ ·**ï¼Œéƒ½ä¼šç¼–è¯‘é”™è¯¯ã€‚

è¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„è§„åˆ™ï¼Œå› ä¸ºè¿™æ ·å¯ä»¥é¿å…æˆ‘ä»¬å¼•ç”¨å¾ˆå¤šæ— ç”¨çš„ä»£ç è€Œå¯¼è‡´çš„ä»£ç è‡ƒè‚¿å’Œç¨‹åºçš„åºå¤§ï¼Œå› ä¸ºå¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬éƒ½ä¸çŸ¥é“å“ªäº›åŒ…æ˜¯å¦ä½¿ç”¨ã€‚

è¿™åœ¨ C å’Œ Java ä¸Šä¼šç»å¸¸é‡åˆ°ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬ä¸å¾—ä¸å€ŸåŠ©å·¥å…·æ¥æŸ¥æ‰¾æˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨çš„æ–‡ä»¶ã€ç±»å‹ã€æ–¹æ³•å’Œå˜é‡ç­‰ï¼ŒæŠŠå®ƒä»¬æ¸…ç†æ‰ã€‚

```go
// å¦‚æœå¯¼å…¥ä¸€ä¸ªåŒ…ï¼Œå´ä¸å¼•ç”¨å…¶ä¸­çš„å˜é‡å’Œå‡½æ•°ï¼Œç¼–è¯‘æŠ¥é”™
//  imported and not used: "math/rand" 
import (
    "fmt"
    "math/rand"
    crand "crypto/rand"
)
func main() {
    fmt.println("Go is great!")
}

// ä½¿ç”¨ _ çš„æ–¹å¼æ¥å¯¼å…¥æœªè¢«å¼•ç”¨åˆ°çš„åŒ…ï¼Œä¹Ÿå¯ä»¥ç¼–è¯‘é€šè¿‡ï¼Œè¡¨ç¤ºæš‚æ—¶ä¸ä¼šç”¨åˆ°è¿™ä¸ªåŒ…ï¼Œåç»­å¯èƒ½ä¼šç”¨åˆ°
import (
    "fmt"
    _ "math/rand"
    _ "crypto/rand"
)
func main() {
    fmt.println("Go is great!")
}


// å½“ä½ å¯¼å…¥äº†ä¸€ä¸ªä¸åœ¨ä»£ç é‡Œä½¿ç”¨çš„åŒ…æ—¶ï¼ŒGo ç¼–è¯‘å™¨ä¼šç¼–è¯‘å¤±è´¥ï¼Œå¹¶è¾“å‡ºä¸€ä¸ªé”™è¯¯ã€‚
// Go å¼€å‘å›¢é˜Ÿè®¤ä¸ºï¼Œè¿™ä¸ªç‰¹æ€§å¯ä»¥é˜²æ­¢å¯¼å…¥äº†æœªè¢«ä½¿ç”¨çš„åŒ…ï¼Œé¿å…ä»£ç å˜å¾—è‡ƒè‚¿ã€‚
// è™½ç„¶è¿™ä¸ªç‰¹æ€§ä¼šè®©äººè§‰å¾—å¾ˆçƒ¦ï¼Œä½† Go å¼€å‘å›¢é˜Ÿä»ç„¶èŠ±äº†å¾ˆå¤§çš„åŠ›æ°”è¯´æœè‡ªå·±ï¼Œå†³å®šåŠ å…¥è¿™ä¸ªç‰¹æ€§ï¼Œç”¨æ¥é¿å…å…¶ä»–ç¼–ç¨‹
// è¯­è¨€é‡Œå¸¸å¸¸é‡åˆ°çš„ä¸€äº›é—®é¢˜ï¼Œå¦‚å¾—åˆ°ä¸€ä¸ªå¡æ»¡æœªä½¿ç”¨åº“çš„è¶…å¤§å¯æ‰§è¡Œæ–‡ä»¶ã€‚å¾ˆå¤šè¯­è¨€åœ¨è¿™ç§æƒ…å†µ
// ä¼šä½¿ç”¨è­¦å‘Šåšæç¤ºï¼Œè€Œ Go å¼€å‘å›¢é˜Ÿè®¤ä¸ºï¼Œä¸å…¶è®©ç¼–è¯‘å™¨å‘Šè­¦ï¼Œä¸å¦‚ç›´æ¥å¤±è´¥æ›´æœ‰æ„ä¹‰ã€‚æ¯ä¸ªç¼–
// è¯‘è¿‡å¤§å‹ C ç¨‹åºçš„äººéƒ½çŸ¥é“ï¼Œåœ¨æµ©å¦‚çƒŸæµ·çš„ç¼–è¯‘å™¨è­¦å‘Šé‡Œæ‰¾åˆ°ä¸€æ¡æœ‰ç”¨çš„ä¿¡æ¯æ˜¯å¤šä¹ˆå›°éš¾çš„ä¸€ä»¶
// äº‹ã€‚è¿™ç§æƒ…å†µä¸‹ç¼–è¯‘å¤±è´¥ä¼šæ›´åŠ æ˜ç¡®ã€‚
```

#### åŒ…çš„åˆå§‹åŒ–

åŒ…çš„åˆå§‹åŒ–é¦–å…ˆæ˜¯è§£å†³åŒ…çº§å˜é‡çš„ä¾èµ–é¡ºåºï¼Œç„¶åæŒ‰ç…§åŒ…çº§å˜é‡å£°æ˜å‡ºç°çš„é¡ºåºä¾æ¬¡åˆå§‹åŒ–ï¼š

```go
var a = b + c  // a ç¬¬ä¸‰ä¸ªåˆå§‹åŒ–, ä¸º 3
var b = f()    // b ç¬¬äºŒä¸ªåˆå§‹åŒ–, ä¸º 2, é€šè¿‡è°ƒç”¨ f (ä¾èµ–c)
var c = 1      // c ç¬¬ä¸€ä¸ªåˆå§‹åŒ–, ä¸º 1

func f() int { 
    return c + 1
}
```

å¦‚æœæƒ³è¦æ„å»ºä¸€ä¸ªç¨‹åºï¼Œåˆ™åŒ…å’ŒåŒ…å†…çš„æ–‡ä»¶éƒ½å¿…é¡»ä»¥æ­£ç¡®çš„é¡ºåºè¿›è¡Œç¼–è¯‘ã€‚åŒ…çš„ä¾èµ–å…³ç³»å†³å®šäº†å…¶æ„å»ºé¡ºåºã€‚

å±äºåŒä¸€ä¸ªåŒ…çš„æºæ–‡ä»¶å¿…é¡»å…¨éƒ¨è¢«ä¸€èµ·ç¼–è¯‘ï¼Œä¸€ä¸ªåŒ…å³æ˜¯ç¼–è¯‘æ—¶çš„ä¸€ä¸ªå•å…ƒï¼Œå› æ­¤æ ¹æ®æƒ¯ä¾‹ï¼Œæ¯ä¸ªç›®å½•éƒ½åªåŒ…å«ä¸€ä¸ªåŒ…ã€‚

**å¦‚æœå¯¹ä¸€ä¸ªåŒ…è¿›è¡Œæ›´æ”¹æˆ–é‡æ–°ç¼–è¯‘ï¼Œæ‰€æœ‰å¼•ç”¨äº†è¿™ä¸ªåŒ…çš„å®¢æˆ·ç«¯ç¨‹åºéƒ½å¿…é¡»å…¨éƒ¨é‡æ–°ç¼–è¯‘ã€‚**

Go ä¸­çš„åŒ…æ¨¡å‹é‡‡ç”¨äº†æ˜¾å¼ä¾èµ–å…³ç³»çš„æœºåˆ¶æ¥è¾¾åˆ°å¿«é€Ÿç¼–è¯‘çš„ç›®çš„ã€‚



### init å‡½æ•°

å¦‚æœåŒ…ä¸­å«æœ‰å¤šä¸ª .go æºæ–‡ä»¶ï¼Œå®ƒä»¬å°†æŒ‰ç…§å‘ç»™ç¼–è¯‘å™¨çš„é¡ºåºè¿›è¡Œåˆå§‹åŒ–ï¼ŒGoè¯­è¨€çš„æ„å»ºå·¥å…·é¦–å…ˆä¼šå°†  .go æ–‡ä»¶æ ¹æ®æ–‡ä»¶åæ’åºï¼Œç„¶åä¾æ¬¡è°ƒç”¨ç¼–è¯‘å™¨ç¼–è¯‘ã€‚

å¯¹äºåœ¨åŒ…çº§åˆ«å£°æ˜çš„å˜é‡ï¼Œå¦‚æœæœ‰åˆå§‹åŒ–è¡¨è¾¾å¼åˆ™ç”¨è¡¨è¾¾å¼è¿›è¡Œåˆå§‹åŒ–ï¼Œè¿˜æœ‰ä¸€äº›æ²¡æœ‰åˆå§‹åŒ–è¡¨è¾¾å¼çš„ï¼Œä¾‹å¦‚æŸäº›è¡¨æ ¼æ•°æ®åˆå§‹åŒ–å¹¶ä¸æ˜¯ä¸€ä¸ªç®€å•çš„èµ‹å€¼è¿‡ç¨‹ã€‚

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªç‰¹æ®Šçš„ `init` åˆå§‹åŒ–å‡½æ•°æ¥ç®€åŒ–åˆå§‹åŒ–å·¥ä½œã€‚

**æ¯ä¸ªæ–‡ä»¶éƒ½å¯ä»¥åŒ…å«å¤šä¸ª `init` åˆå§‹åŒ–å‡½æ•°**:

```go
func init() { /* ... */ }
```

**è¿™æ ·çš„ `init` åˆå§‹åŒ–å‡½æ•°é™¤äº†ä¸èƒ½è¢«ç›´æ¥è°ƒç”¨æˆ–å¼•ç”¨å¤–ï¼Œå…¶ä»–è¡Œä¸ºå’Œæ™®é€šå‡½æ•°ç±»ä¼¼ã€‚**

**åœ¨æ¯ä¸ªæ–‡ä»¶ä¸­çš„ `init` åˆå§‹åŒ–å‡½æ•°ï¼Œåœ¨ç¨‹åºå¼€å§‹æ‰§è¡Œæ—¶æŒ‰ç…§å®ƒä»¬å£°æ˜çš„é¡ºåºè¢«è‡ªåŠ¨è°ƒç”¨ã€‚**

initå‡½æ•°é€šå¸¸ç”¨æ¥åšåˆå§‹åŒ–å˜é‡ã€è®¾ç½®åŒ…æˆ–è€…å…¶ä»–éœ€è¦åœ¨ç¨‹åºæ‰§è¡Œå‰çš„å¼•å¯¼å·¥ä½œã€‚

**æ¯”å¦‚ä¸Šé¢æˆ‘ä»¬è®²çš„éœ€è¦ä½¿ç”¨`_`ç©ºæ ‡å¿—ç¬¦æ¥å¯¼å…¥ä¸€ä¸ªåŒ…çš„ç›®çš„ï¼Œå°±æ˜¯æƒ³æ‰§è¡Œè¿™ä¸ªåŒ…é‡Œçš„initå‡½æ•°ã€‚**

**æ¯ä¸ªåŒ…å¯ä»¥åŒ…å«ä»»æ„å¤šä¸ª init å‡½æ•°ï¼Œè¿™äº›å‡½æ•°éƒ½ä¼šåœ¨ç¨‹åºæ‰§è¡Œå¼€å§‹çš„æ—¶å€™è¢«è°ƒç”¨ã€‚**

æ¯ä¸ªåŒ…åœ¨è§£å†³ä¾èµ–çš„å‰æä¸‹ï¼Œä»¥å¯¼å…¥å£°æ˜çš„é¡ºåºåˆå§‹åŒ–ï¼Œæ¯ä¸ªåŒ…åªä¼šè¢«åˆå§‹åŒ–ä¸€æ¬¡ã€‚

å› æ­¤ï¼Œå¦‚æœä¸€ä¸ª p åŒ…å¯¼å…¥äº† q åŒ…ï¼Œé‚£ä¹ˆåœ¨ p åŒ…åˆå§‹åŒ–çš„æ—¶å€™å¯ä»¥è®¤ä¸º q åŒ…å¿…ç„¶å·²ç»åˆå§‹åŒ–è¿‡äº†ã€‚

**åˆå§‹åŒ–å·¥ä½œæ˜¯è‡ªä¸‹è€Œä¸Šè¿›è¡Œçš„ï¼Œmain åŒ…æœ€åè¢«åˆå§‹åŒ–ã€‚ä»¥è¿™ç§æ–¹å¼ï¼Œå¯ä»¥ç¡®ä¿åœ¨ main å‡½æ•°æ‰§è¡Œä¹‹å‰ï¼Œæ‰€æœ‰ä¾èµ–çš„åŒ…éƒ½å·²ç»å®Œæˆåˆå§‹åŒ–å·¥ä½œäº†ã€‚**

```go
// æˆ‘ä»¬ä»¥æ•°æ®åº“çš„é©±åŠ¨ä¸ºä¾‹ï¼ŒGoè¯­è¨€ä¸ºäº†ç»Ÿä¸€å…³äºæ•°æ®åº“çš„è®¿é—®ï¼Œä½¿ç”¨databases/sqlæŠ½è±¡äº†ä¸€å±‚æ•°æ®åº“çš„æ“ä½œ
// å¯ä»¥æ»¡è¶³æˆ‘ä»¬æ“ä½œ MySQLã€PostgreSQL ç­‰æ•°æ®åº“ï¼Œè¿™æ ·ä¸ç®¡æˆ‘ä»¬ä½¿ç”¨è¿™äº›æ•°æ®åº“çš„å“ªä¸ªé©±åŠ¨ï¼Œç¼–ç æ“ä½œéƒ½æ˜¯ä¸€æ ·çš„ã€‚
// æƒ³æ¢é©±åŠ¨çš„æ—¶å€™ï¼Œå°±å¯ä»¥ç›´æ¥æ¢æ‰ï¼Œè€Œä¸ç”¨ä¿®æ”¹å…·ä½“çš„ä»£ç 
// github.com/go-sql-driver/mysql è¿™ä¸ªåŒ…ä¸­çš„ä¸€ä¸ª init å‡½æ•°

package mysql

import (
	"database/sql"
)

func init() {
	sql.Register("mysql", &MySQLDriver{})
}



// åœ¨ä¸šåŠ¡ä»£ç ä¸­å¯¼å…¥sqlåŒ…
// å› ä¸ºæˆ‘ä»¬åªæ˜¯æƒ³æ‰§è¡Œè¿™ä¸ªmysqlåŒ…çš„initæ–¹æ³•ï¼Œå¹¶ä¸æƒ³ä½¿ç”¨è¿™ä¸ªåŒ…ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å¯¼å…¥è¿™ä¸ªåŒ…çš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨_é‡å‘½ååŒ…åï¼Œé¿å…ç¼–è¯‘é”™è¯¯ã€‚

import "database/sql"
import _ "github.com/go-sql-driver/mysql"

db, err := sql.Open("mysql", "user:password@/dbname")

```





### æ ‡å‡†åº“



fmt åŒ…æ˜¯æ¥è‡ªäºGo çš„**æ ‡å‡†åº“**ã€‚åœ¨ Go çš„å®‰è£…ç›®å½•ä¸­çš„ src ç›®å½•ä¸‹åŒ…å«äº†ä¸€äº›å¯ä»¥ç›´æ¥ä½¿ç”¨çš„åŒ…ï¼Œå³æ ‡å‡†åº“ã€‚



```shell
bin
pkg
src
ã€€ã€€pk1
ã€€ã€€ã€€ã€€pk2
ã€€ã€€ã€€ã€€ã€€ã€€function1.go
ã€€ã€€ã€€ã€€ã€€ã€€function2.go
ã€€ã€€index.go
```



```go
// function1.go
package  pk3

func  Function_test3()  {
    	println("function_test3")
}
```

```go
// function2.go
package  pk3
import (
	"fmt"
)

func  Function_test4()  {
     	fmt.println("function_test4")
}
```

```go
// index.go
package main
import (
    "fmt"
    "pk1/pk2"
    
)
func main() {
    pk3.Function_test4()
}
```



**åŒ…çš„åµŒå¥—**



**1ã€import å¯¼å…¥çš„å‚æ•°æ˜¯è·¯å¾„ï¼Œè€ŒéåŒ…åã€‚**

**1ã€å°½ç®¡ä¹ æƒ¯å°†åŒ…åå’Œç›®å½•åä¿è¯ä¸€è‡´ï¼Œä½†è¿™ä¸æ˜¯å¼ºåˆ¶è§„å®šï¼›**

**2ã€åœ¨ä»£ç ä¸­å¼•ç”¨åŒ…æˆå‘˜æ—¶ï¼Œä½¿ç”¨åŒ…åè€Œéç›®å½•åï¼›**

**3ã€åŒä¸€ç›®å½•ä¸‹ï¼Œæ‰€æœ‰æºæ–‡ä»¶å¿…é¡»ä½¿ç”¨ç›¸åŒçš„åŒ…åç§°ï¼ˆå› ä¸ºå¯¼å…¥æ—¶ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼Œæ‰€ä»¥åœ¨æœç´¢è·¯å¾„ä¸‹ï¼ŒåŒ…å¿…é¡»æœ‰å”¯ä¸€è·¯å¾„ï¼Œä½†æ— é¡»æ˜¯å”¯ä¸€åå­—ï¼‰ï¼›**

**4ã€è‡³äºæ–‡ä»¶åï¼Œæ›´æ²¡å•¥é™åˆ¶ï¼ˆæ‰©å±•åä¸º.goï¼‰;**









## æ³¨é‡Š

Goè¯­è¨€æ”¯æŒCé£æ ¼çš„å—æ³¨é‡Š `/* */` å’ŒC++é£æ ¼çš„è¡Œæ³¨é‡Š `//`ã€‚ è¡Œæ³¨é‡Šæ›´ä¸ºå¸¸ç”¨ï¼Œè€Œå—æ³¨é‡Šåˆ™ä¸»è¦ç”¨ä½œåŒ…çš„æ³¨é‡Šï¼Œå½“ç„¶ä¹Ÿå¯åœ¨ç¦ç”¨ä¸€å¤§æ®µä»£ç æ—¶ä½¿ç”¨ã€‚

æ³¨é‡Šæœ‰ä¸¤ç§å½¢å¼ï¼š

1. **è¡Œæ³¨é‡Š**ä»¥ `//` å¼€å§‹ï¼Œè‡³è¡Œå°¾ç»“æŸã€‚ä¸€æ¡è¡Œæ³¨é‡Šè§†ä¸ºä¸€ä¸ªæ¢è¡Œç¬¦ã€‚
2. **å—æ³¨é‡Š** ä»¥ `/*` å¼€å§‹ï¼Œè‡³ `*/` ç»“æŸã€‚ å—æ³¨é‡Šåœ¨åŒ…å«å¤šè¡Œæ—¶è§†ä¸ºä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œå¦åˆ™è§†ä¸ºä¸€ä¸ªç©ºæ ¼ã€‚

æ³¨é‡Šä¸å¯åµŒå¥—ã€‚

### åŒ…æ³¨é‡Š

æ¯ä¸€ä¸ªåŒ…åº”è¯¥æœ‰ç›¸å…³æ³¨é‡Šï¼Œåœ¨ package è¯­å¥ä¹‹å‰çš„å—æ³¨é‡Šå°†è¢«é»˜è®¤è®¤ä¸ºæ˜¯è¿™ä¸ªåŒ…çš„æ–‡æ¡£è¯´æ˜ï¼Œå…¶ä¸­åº”è¯¥æä¾›ä¸€äº›ç›¸å…³ä¿¡æ¯å¹¶å¯¹æ•´ä½“åŠŸèƒ½åšç®€è¦çš„ä»‹ç»ã€‚

ä¸€ä¸ªåŒ…å¯ä»¥åˆ†æ•£åœ¨å¤šä¸ªæ–‡ä»¶ä¸­ï¼Œä½†æ˜¯åªéœ€è¦åœ¨å…¶ä¸­ä¸€ä¸ªè¿›è¡Œæ³¨é‡Šè¯´æ˜å³å¯ã€‚

å½“å¼€å‘äººå‘˜éœ€è¦äº†è§£åŒ…çš„ä¸€äº›æƒ…å†µæ—¶ï¼Œè‡ªç„¶ä¼šç”¨ godoc æ¥æ˜¾ç¤ºåŒ…çš„æ–‡æ¡£è¯´æ˜ã€‚

åœ¨é¦–è¡Œçš„ç®€è¦æ³¨é‡Šä¹‹åå¯ä»¥ç”¨æˆæ®µçš„æ³¨é‡Šæ¥è¿›è¡Œæ›´è¯¦ç»†çš„è¯´æ˜ï¼Œè€Œä¸å¿…æ‹¥æŒ¤åœ¨ä¸€èµ·ã€‚å¦å¤–ï¼Œåœ¨å¤šæ®µæ³¨é‡Šä¹‹é—´åº”ä»¥ç©ºè¡Œåˆ†éš”åŠ ä»¥åŒºåˆ†ã€‚



```go
// Package superman implements methods for saving the world.
//
// Experience has shown that a small number of procedures can prove
// helpful when attempting to save the world.
package superman


```

### å˜é‡æ³¨é‡Š

å‡ ä¹æ‰€æœ‰å…¨å±€ä½œç”¨åŸŸçš„ç±»å‹ã€å¸¸é‡ã€å˜é‡ã€å‡½æ•°å’Œè¢«å¯¼å‡ºçš„å¯¹è±¡éƒ½åº”è¯¥æœ‰ä¸€ä¸ªåˆç†çš„æ³¨é‡Šã€‚å¦‚æœè¿™ç§æ³¨é‡Šï¼ˆç§°ä¸ºæ–‡æ¡£æ³¨é‡Šï¼‰å‡ºç°åœ¨å‡½æ•°å‰é¢

```go
// enterOrbit causes Superman to fly into low Earth orbit, a position
// that presents several possibilities for planet salvation.
func enterOrbit() error {
   ...
}

```



`go doc` å·¥å…·ä¼šä» Go ç¨‹åºå’ŒåŒ…æ–‡ä»¶ä¸­æå–é¡¶çº§å£°æ˜çš„é¦–è¡Œæ³¨é‡Šä»¥åŠæ¯ä¸ªå¯¹è±¡çš„ç›¸å…³æ³¨é‡Šï¼Œå¹¶ç”Ÿæˆç›¸å…³æ–‡æ¡£ã€‚

å®ƒä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªæä¾›åœ¨çº¿æ–‡æ¡£æµè§ˆçš„ web æœåŠ¡å™¨ï¼Œ[golang.org](http://golang.org) å°±æ˜¯é€šè¿‡è¿™ç§å½¢å¼å®ç°çš„ã€‚

```go
go doc package 
// è·å–åŒ…çš„æ–‡æ¡£æ³¨é‡Šï¼Œä¾‹å¦‚ï¼šgo doc fmt ä¼šæ˜¾ç¤ºä½¿ç”¨ godoc ç”Ÿæˆçš„ fmt åŒ…çš„æ–‡æ¡£æ³¨é‡Šã€‚

go doc package/subpackage 
// è·å–å­åŒ…çš„æ–‡æ¡£æ³¨é‡Šï¼Œä¾‹å¦‚ï¼šgo doc container/list

go doc package function 
// è·å–æŸä¸ªå‡½æ•°åœ¨æŸä¸ªåŒ…ä¸­çš„æ–‡æ¡£æ³¨é‡Šï¼Œä¾‹å¦‚ï¼šgo doc fmt Printf ä¼šæ˜¾ç¤ºæœ‰å…³ fmt.Printf() çš„ä½¿ç”¨è¯´æ˜ã€‚
```



## å‘½åè§„èŒƒ

å‘½ååœ¨ä»»ä½•è¯­è¨€ä¸­éƒ½æ˜¯ç›¸å½“é‡è¦çš„ï¼Œåœ¨ go ä¸­ï¼Œå‘½åå¯ä»¥ç›´æ¥å½±å“åˆ°è¯­ä¹‰ã€‚

ä¸ java ä¸åŒï¼Œgo æ²¡æœ‰ public private ç­‰å…³é”®å­—æ¥ä¿®é¥°å˜é‡æˆ–æ–¹æ³•ã€‚

ä¾‹å¦‚ï¼ŒæŸä¸ªå˜é‡åç§°åœ¨åŒ…å¤–æ˜¯å¦å¯è§ï¼Œå°±å–å†³äºå…¶é¦–ä¸ªå­—ç¬¦æ˜¯å¦ä¸ºå¤§å†™å­—æ¯ã€‚



åŒ…åè§„èŒƒæƒ¯ä¾‹ï¼š

- åŒ…åå°å†™ï¼Œä¸ä½¿ç”¨ä¸‹åˆ’çº¿æˆ–é©¼å³°è®°æ³•ã€‚ï¼ˆ`err` çš„å‘½åå°±æ˜¯å‡ºäºç®€çŸ­è€ƒè™‘çš„ï¼‰
- åŒ…ååº”ä¸ºå…¶æºç ç›®å½•çš„åŸºæœ¬åç§°ï¼Œåœ¨ src/pkg/encoding/base64 ä¸­çš„åŒ…åº”ä½œä¸º "encoding/base64" å¯¼å…¥ï¼Œå…¶åŒ…ååº”ä¸º base64 ã€‚
- 

golang ä¸­ **å‡½æ•°ã€å˜é‡ã€å¸¸é‡ã€ç±»å‹ã€è¯­å¥ã€åŒ…å** éƒ½éµå¾ªå¦‚ä¸‹è§„åˆ™ï¼š

- åŒ…åå°å†™ï¼ŒåŒ…åæ²¡æœ‰å¤§å†™æˆ–ä¸‹åˆ’çº¿ã€‚

- å­—æ¯æˆ–ä¸‹åˆ’çº¿å¼€å¤´ï¼Œå¹¶åŒºåˆ†å¤§å°å†™ã€‚
- å•è¯ç»„åˆåç§°æ—¶ï¼Œä½¿ç”¨é©¼å³°å‘½åæ³•ï¼Œä¾‹å¦‚ï¼šæ ‡å‡†åº“ä¸­çš„å‡½æ•°ä½¿ç”¨ OuoteRuneToASCII è¿™ç§å‘½åæ–¹æ³•ã€‚
- go é£æ ¼å‘½åç®€æ´ï¼Œåç§°çš„ä½œç”¨åŸŸè¶Šå¤§ï¼Œå°±ä½¿ç”¨è¶Šé•¿è¶Šæœ‰æ„ä¹‰çš„åç§°
- 

**å®ä½“ä½œç”¨åŸŸ**

- å‡½æ•°å†…çš„å®ä½“å‡½æ•°å†…å¯è§
- å‡½æ•°å¤–çš„å®ä½“ï¼ŒåŒ…å†…æ‰€æœ‰æºæ–‡ä»¶éƒ½å¯è§
- å®ä½“çš„ç¬¬ä¸€ä¸ªå­—æ¯çš„å¤§å°å†™å†³å®šæ˜¯å¦è·¨åŒ…å¯è§ï¼šå¤§å†™è¡¨ç¤ºå¯¼å‡ºçš„ï¼ŒåŒ…å¤–å¯è§ï¼Œå°å†™åŒ…å†…å¯è§ã€‚
- å…¶å®å°±æ˜¯é¢å‘å¯¹è±¡è¯­è¨€ä¸­çš„ public ï¼Œ private æ¦‚å¿µ



## å˜é‡

**golangæ˜¯ä¸€ä¸ªå¼ºç±»å‹è¯­è¨€ï¼Œå˜é‡åœ¨å£°æ˜çš„æ—¶å€™ï¼Œå¿…é¡»è¦ç¡®å®šå…¶ç±»å‹ã€‚**

Go å’Œè®¸å¤šç¼–ç¨‹è¯­è¨€ä¸åŒï¼Œå®ƒåœ¨å£°æ˜å˜é‡æ—¶å°†å˜é‡çš„ç±»å‹æ”¾åœ¨å˜é‡çš„åç§°ä¹‹åã€‚Go ä¸ºä»€ä¹ˆè¦é€‰æ‹©è¿™ä¹ˆåšå‘¢ï¼Ÿ

é¦–å…ˆï¼Œå®ƒæ˜¯ä¸ºäº†é¿å…åƒ C è¯­è¨€ä¸­é‚£æ ·å«ç³Šä¸æ¸…çš„å£°æ˜å½¢å¼ï¼Œä¾‹å¦‚ï¼š`int* a, b;`ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œåªæœ‰ a æ˜¯æŒ‡é’ˆè€Œ b ä¸æ˜¯ã€‚

å¦‚æœä½ æƒ³è¦è¿™ä¸¤ä¸ªå˜é‡éƒ½æ˜¯æŒ‡é’ˆï¼Œåˆ™éœ€è¦å°†å®ƒä»¬åˆ†å¼€ä¹¦å†™ï¼ˆä½ å¯ä»¥åœ¨ Go è¯­è¨€çš„ [å£°æ˜è¯­æ³•](https://blog.golang.org/declaration-syntax) é¡µé¢æ‰¾åˆ°æœ‰å…³äºè¿™ä¸ªè¯é¢˜çš„æ›´å¤šè®¨è®ºï¼‰ã€‚



ä½¿ç”¨ var å…³é”®å­—æ¥å£°æ˜å˜é‡ï¼Œå˜é‡å£°æ˜çš„é€šç”¨æ ¼å¼å¦‚ä¸‹ï¼š

```go
var name type = expression 

// å£°æ˜å¤šä¸ªå˜é‡
var a int
var b bool
var str string

// å£°æ˜å¤šä¸ªå˜é‡
var (
	v1 int
	v2 string
)


// å®Œæ•´çš„å£°æ˜å¹¶èµ‹å€¼
var a int = 15
var i = 5
var b bool = false
var str string = "Go says hello to the world!"

// ç±»å‹æ¨å¯¼çš„å£°æ˜å¹¶èµ‹å€¼
// è¿™æœ‰ç‚¹åƒ Ruby å’Œ Python è¿™ç±»åŠ¨æ€è¯­è¨€ï¼Œåªä¸è¿‡å®ƒä»¬æ˜¯åœ¨è¿è¡Œæ—¶è¿›è¡Œæ¨æ–­ï¼Œè€Œ Go æ˜¯åœ¨ç¼–è¯‘æ—¶å°±å·²ç»å®Œæˆæ¨æ–­è¿‡ç¨‹ã€‚
var a = 15
var b = false
var str = "Go says hello to the world!"

// å°†å¤šä¸ªå˜é‡åˆåœ¨ä¸€ä¸ªvarå—é‡Œé¢
var (
    a = 15
    b = false
    str = "Go says hello to the world!"
    numShips = 50
    city string
)

// å˜é‡çš„ç±»å‹ä¹Ÿå¯ä»¥åœ¨è¿è¡Œæ—¶å®ç°è‡ªåŠ¨æ¨æ–­
var (
    HOME = os.Getenv("HOME")
    USER = os.Getenv("USER")
    GOROOT = os.Getenv("GOROOT")
)

```

ç±»å‹å’Œè¡¨è¾¾å¯ä»¥çœç•¥ä¸€éƒ¨åˆ†ï¼Œä½†æ˜¯ä¸èƒ½éƒ½çœç•¥ï¼š

- å¦‚æœçœç•¥ç±»å‹ï¼Œé‚£ä¹ˆå°†æ ¹æ®åˆå§‹åŒ–è¡¨è¾¾å¼æ¥æ¨å¯¼å˜é‡çš„ç±»å‹ä¿¡æ¯ã€‚

- å¦‚æœçœç•¥è¡¨è¾¾å¼ï¼Œå˜é‡ç±»å‹ç”± **type** ç±»å‹å†³å®šï¼Œå…¶åˆå§‹å€¼æ˜¯è¯¥ç±»å‹çš„**é›¶å€¼**ã€‚

  - æ•°å­—ç±»å‹çš„é›¶å€¼æ˜¯0ã€‚
  - æ¥å£å’Œå¼•ç”¨ç±»å‹ï¼ˆsliceï¼ŒæŒ‡é’ˆï¼Œmapï¼Œé€šé“ï¼Œå‡½æ•°ï¼‰çš„é›¶å€¼æ˜¯ nil 
  - å¯¹äºç»“æ„ä½“æˆ–æ•°ç»„è¿™æ ·çš„å¤åˆç±»å‹ï¼Œé›¶å€¼æ˜¯å…¶æ‰€æœ‰å…ƒç´ æˆ–æˆå‘˜çš„é›¶å€¼ã€‚

**æ‰€ä»¥ golang ä¸­ä¸å­˜åœ¨æœªåˆå§‹åŒ–çš„å˜é‡**ã€‚é›¶å€¼æœºåˆ¶ä¿è¯äº†æ‰€æœ‰çš„å˜é‡éƒ½æ˜¯è‰¯å¥½å®šä¹‰çš„ã€‚**è®°ä½ï¼Œæ‰€æœ‰çš„å†…å­˜åœ¨ Go ä¸­éƒ½æ˜¯ç»è¿‡åˆå§‹åŒ–çš„ã€‚**

å£°æ˜å˜é‡åˆ—è¡¨ï¼š

```go
// å£°æ˜ä¸‰ä¸ªintç±»å‹çš„å˜é‡ i,j,k
var i,j,k int   
// å£°æ˜ä¸‰ä¸ªä¸åŒç±»å‹çš„å˜é‡
var b,f,s = true , 2.3 , 'four' 
```

**åŒ…çº§åˆ«çš„å˜é‡åœ¨ main å¼€å§‹ä¹‹å‰å°±è¿›è¡Œäº†å£°æ˜å’Œèµ‹å€¼ã€‚**



### å¤šé‡èµ‹å€¼

Goè¯­è¨€çš„å˜é‡èµ‹å€¼ä¸å¤šæ•°è¯­è¨€ä¸€è‡´ï¼Œä½†æ˜¯å¼•å…¥äº†C/C++ç¨‹åºå‘˜æœŸç›¼å¤šå¹´çš„å¤šé‡èµ‹å€¼åŠŸèƒ½ï¼š

```go
// åœ¨ go ä¸­äº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼
i, j = j, i

// åœ¨ä¸æ”¯æŒå¤šé‡èµ‹å€¼çš„è¯­è¨€ä¸­ï¼Œäº¤äº’ä¸¤ä¸ªå˜é‡çš„å†…å®¹éœ€è¦å¼•å…¥ä¸€ä¸ªä¸­é—´å˜é‡
t = i; i = j; j = t;
```



### çŸ­å˜é‡(çŸ­å£°æ˜)

åœ¨å‡½æ•°ä¸­ï¼Œå¯ä»¥ä½¿ç”¨çŸ­å˜é‡çš„å½¢å¼æ¥**å£°æ˜**å’Œ**åˆå§‹åŒ–**å±€éƒ¨å˜é‡ã€‚ä½¿ç”¨å¦‚ä¸‹æ ¼å¼ï¼š

```go
// ä¸éœ€è¦ var å…³é”®å­—ï¼ŒGoç¼–è¯‘å™¨å¯ä»¥ä»åˆå§‹åŒ–è¡¨è¾¾å¼çš„å³å€¼æ¨å¯¼å‡ºè¯¥å˜é‡åº”è¯¥å£°æ˜ä¸ºå“ªç§ç±»å‹
name := expression
```

**çŸ­å˜é‡ä¸»è¦ç”¨äºå±€éƒ¨å˜é‡å£°æ˜ã€‚å¸¦ var å…³é”®å­—çš„ä¸€èˆ¬ç”¨äºå…¨å±€å˜é‡**

å¤šå˜é‡å£°æ˜ä¹Ÿå¯ä»¥ç”¨çŸ­å£°æ˜çš„æ–¹å¼è¿›è¡Œå£°æ˜ï¼š

```go
// ç›´æ¥çŸ­å£°æ˜ä¸¤ä¸ªå˜é‡
i,j := 0,1
// os.Openå‡½æ•°è°ƒç”¨å°†è¿”å›ä¸¤ä¸ªå€¼
f , err := os.Open(name)

// çŸ­å£°æ˜ä¸­ä¹Ÿå¯ä»¥æ··å¸¦èµ‹å€¼,å¯¹äºsæ¥è¯´ï¼Œè¿™æ˜¯å£°æ˜å¹¶èµ‹å€¼ï¼Œå¯¹äºiæ¥è®²ï¼Œå› ä¸ºå‰é¢å·²ç»å£°æ˜è¿‡äº†ï¼Œè¿™å°±æ˜¯èµ‹å€¼æ“ä½œã€‚
s , i := 1,0



// çŸ­å£°æ˜ä¸­æœ€å°‘è¦æœ‰ä¸€ä¸ªå˜é‡æ˜¯æ–°å£°æ˜ï¼Œä¸‹é¢çš„ä»£ç å°†ä¸èƒ½ç¼–è¯‘é€šè¿‡
f , err := os.Open(infile)
// ...
f , err := os.Create(outfile) // compile error: no new variables

// è§£å†³çš„åŠæ³•å°±æ˜¯æŠŠç¬¬äºŒä¸ªçŸ­å£°æ˜æ”¹æˆæ™®é€šçš„å¤šé‡èµ‹å€¼



// çŸ­å£°æ˜è¯­å¥åªæœ‰å¯¹å·²ç»åœ¨åŒçº§è¯æ³•åŸŸå£°æ˜è¿‡çš„å˜é‡æ‰å’Œèµ‹å€¼æ“ä½œè¯­å¥ç­‰ä»·ï¼Œå¦‚æœå˜é‡æ˜¯åœ¨å¤–éƒ¨è¯æ³•åŸŸå£°æ˜çš„ï¼Œé‚£ä¹ˆç®€çŸ­å˜é‡å£°æ˜è¯­å¥å°†ä¼šåœ¨å½“å‰è¯æ³•åŸŸé‡æ–°å£°æ˜ä¸€ä¸ªæ–°çš„å˜é‡ã€‚

```

`:=` æ˜¯ä¸€ä¸ªå£°æ˜åŠ¨ä½œï¼Œ`=` æ˜¯ä¸€ä¸ªèµ‹å€¼åŠ¨ä½œã€‚å¤šå˜é‡å£°æ˜ä¸èƒ½ä¸**å¤šé‡èµ‹å€¼**ææ··ï¼š

```go
// å¤šé‡èµ‹å€¼ï¼Œäº¤æ¢iå’Œjçš„å€¼
i , j = j , i
```







### å˜é‡çš„å†…å­˜å¤§å°





### æŒ‡é’ˆ

æ™®é€šå˜é‡åœ¨å£°æ˜è¯­å¥åˆ›å»ºæ—¶è¢«ç»‘å®šåˆ°ä¸€ä¸ªå˜é‡åï¼Œæ¯”å¦‚  `var  x int = 1` ï¼Œå£°æ˜ä¸€ä¸ªå˜é‡ x ï¼Œåœ¨å†…å­˜ä¸­çš„å€¼æ˜¯ 1ã€‚

æŒ‡é’ˆï¼Œæ˜¯ä¸€ä¸ªå˜é‡çš„åœ°å€ï¼Œä½¿ç”¨æŒ‡é’ˆï¼Œå¯ä»¥åœ¨ä¸çŸ¥é“å˜é‡åçš„æƒ…å†µä¸‹ï¼Œç›´æ¥è¯»å–æˆ–æ“ä½œå˜é‡å€¼ã€‚

å£°æ˜ä¸€ä¸ªæ•´å½¢å˜é‡ `var x int`ï¼Œé‚£ä¹ˆè¡¨è¾¾å¼ &(x)  å°±æ˜¯æŒ‡å‘ x è¿™ä¸ªæ•´å‹å˜é‡çš„æŒ‡é’ˆã€‚è¿™ä¸ªè¡¨è¾¾å¼çš„ç±»å‹å°±æ˜¯æ•´å‹æŒ‡é’ˆï¼ˆ*intï¼‰ã€‚

å¦‚æœè¿™ä¸ªæ•´å½¢æŒ‡é’ˆå«åš p , é‚£ä¹ˆå°±è¯´ p æŒ‡å‘ x , æˆ– p åŒ…å« x çš„åœ°å€ï¼Œp æŒ‡å‘çš„å˜é‡å†™ä½œ *p  ã€‚

```go
//  /go-demo/pointer.go

package main

import (
    "fmt"
    "reflect"
)

func main() {
    // å£°æ˜ä¸¤ä¸ªæ•´å‹å˜é‡a,b
    var (
    	a int32 = 1
    	b int = 2
    )
    // æ‰“å°å˜é‡a,bçš„å€¼
    fmt.Println(a,b)
    // åˆ›å»ºä¸€ä¸ªæŒ‡é’ˆcï¼Œå­˜æ”¾å˜é‡bçš„åœ°å€
    var c = &b
    // åˆ›å»ºä¸€ä¸ªæŒ‡é’ˆdï¼Œå­˜æ”¾æŒ‡é’ˆcçš„åœ°å€
    var d = &c
    
    *c = 3
    fmt.Println(a,b,c,d)
    fmt.Println("the type of a is :", reflect.TypeOf(a))
    fmt.Println("the type of b is :", reflect.TypeOf(b))
    fmt.Println("the type of c is :", reflect.TypeOf(c))
    fmt.Println("the type of d is :", reflect.TypeOf(d))

}


// åœ¨ Linux ä¸Šç¼–è¯‘å¹¶æ‰§è¡Œ
root@vpsServer:~# go run /go-demo/pointer.go
1 2
1 3 0xc00001a088 0xc00000e038
the type of a is : int32
the type of b is : int
the type of c is : *int
the type of d is : **int
root@vpsServer:~#



// æ‰“å°å˜é‡ a , b ï¼Œæ˜¯æ‰“å°å˜é‡ a b çš„å€¼.
// åˆ›å»ºä¸€ä¸ªæŒ‡é’ˆcï¼Œå­˜æ”¾intå˜é‡bçš„åœ°å€ï¼Œè¿™ä¸ªæŒ‡é’ˆçš„æ•°æ®ç±»å‹æ˜¯ *intï¼Œè¡¨ç¤ºå®ƒæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘äº†ä¸€ä¸ªintç±»å‹çš„å˜é‡  
// é€šè¿‡ *c æ¥å–è¿™ä¸ªæŒ‡é’ˆæ‰€æŒ‡å‘å˜é‡ï¼Œå°±ç›¸å½“äºå–bï¼Œç›¸å½“äºç»™bé‡æ–°èµ‹å€¼ã€‚
// é‡æ–°æ‰“å° a,b,c æ‰“åˆ°bçš„æ–°å€¼ï¼Œæ‰“å°æŒ‡é’ˆcï¼Œæ˜¯å˜é‡båœ¨å†…å­˜ä¸­çš„åœ°å€ã€‚
// æ‰“å° a,b,c çš„ç±»å‹
// dæ˜¯æŒ‡é’ˆåµŒå¥—ï¼ŒæŒ‡é’ˆçš„æŒ‡é’ˆ

```

æŒ‡é’ˆç±»å‹çš„é›¶å€¼æ˜¯ nil , åˆ¤æ–­æŒ‡é’ˆæ˜¯å¦ä¸º nil ï¼Œå¯ä»¥åˆ¤æ–­æŒ‡é’ˆæ˜¯å¦æŒ‡å‘ä¸€ä¸ªå˜é‡ã€‚

**å½“å‰ä»…å½“ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘åŒä¸€ä¸ªå˜é‡æˆ–è€…ä¸¤ä¸ªæŒ‡é’ˆéƒ½æ˜¯ nil çš„æƒ…å†µä¸‹æ‰ç›¸ç­‰ã€‚**

```go
var x , y int
fmt.Println(&x == &x , &x == &y, &x == nil ) // "true false false"
```

  ```go

// å£°æ˜ä¸€ä¸ªæŒ‡é’ˆå˜é‡ï¼Œå°†å‡½æ•°è°ƒç”¨ç»“æœèµ‹ç»™è¿™ä¸ªæŒ‡é’ˆã€‚
var p = f()

// å‡½æ•°çš„è¿”å›ç±»å‹æ˜¯æŒ‡é’ˆï¼Œæ¯æ¬¡è°ƒç”¨æ—¶ï¼Œå‡½æ•°å†…çŸ­å£°æ˜ä¸€ä¸ªå˜é‡ï¼Œæ¯æ¬¡è°ƒç”¨è¿”å›è¿™ä¸ªå˜é‡çš„åœ°å€ã€‚
func f() *int {
    v := 1 
    return &n
}
// æ¯æ¬¡è°ƒç”¨féƒ½è¿”å›ä¸åŒçš„å€¼ã€‚
fmt.Println(f() == f())  // "false"
  ```



```go
// golangä¸­æ²¡æœ‰æŒ‡é’ˆè¿ç®—ï¼Œ *p++ ï¼Œå®ƒè¡¨ç¤º (*p)++ ï¼šé¦–å…ˆè·å–æŒ‡é’ˆæŒ‡å‘çš„å€¼ï¼Œç„¶åå¯¹è¿™ä¸ªå€¼åŠ 1ï¼Œè¿™ä¸Cä¸­æœ‰åŒºåˆ«ã€‚
// å› ä¸ºæŒ‡é’ˆåŒ…å«çš„æ˜¯å˜é‡çš„å€¼ï¼Œæ‰€ä»¥æŠŠæŒ‡é’ˆä¼ å‚ç»™å‡½æ•°ï¼Œèƒ½å¤Ÿè®©å‡½æ•°é—´æ¥æ›´æ–°æŒ‡é’ˆæŒ‡å‘çš„å˜é‡çš„å€¼ã€‚
// å‡½æ•°è¿”å›å€¼ä¸ºintç±»å‹ï¼Œå‡½æ•°ä¼ å‚ä¸ºæŒ‡å‘intç±»å‹çš„æŒ‡é’ˆ

// å¯¹äºGoè¯­è¨€ï¼Œä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è®²ï¼Œåªæœ‰ä¸€ç§ä¼ é€’ï¼Œä¹Ÿå°±æ˜¯æŒ‰å€¼ä¼ é€’(by value)ã€‚
// å½“ä¸€ä¸ªå˜é‡å½“ä½œå‚æ•°ä¼ é€’çš„æ—¶å€™ï¼Œä¼šåˆ›å»ºä¸€ä¸ªå˜é‡çš„å‰¯æœ¬ï¼Œç„¶åä¼ é€’ç»™å‡½æ•°æˆ–è€…æ–¹æ³•ï¼Œä½ å¯ä»¥çœ‹åˆ°è¿™ä¸ªå‰¯æœ¬çš„åœ°å€å’Œå˜é‡çš„åœ°å€æ˜¯ä¸ä¸€æ ·çš„ã€‚
// å½“ä¸€ä¸ªæŒ‡é’ˆå½“ä½œå‚æ•°ä¼ é€’çš„æ—¶å€™ï¼Œä¸€ä¸ªæ–°çš„æŒ‡é’ˆè¢«åˆ›å»ºï¼Œå®ƒæŒ‡å‘å˜é‡æŒ‡å‘çš„åŒæ ·çš„å†…å­˜åœ°å€ã€‚ä½ å¯ä»¥å°†è¿™ä¸ªæŒ‡é’ˆçœ‹æˆåŸå§‹å˜é‡æŒ‡é’ˆçš„å‰¯æœ¬ã€‚
// æˆ‘ä»¬å°±å¯ä»¥ç†è§£æˆGoæ€»æ˜¯åˆ›å»ºä¸€ä¸ªå‰¯æœ¬æŒ‰å€¼è½¬é€’ï¼Œåªä¸è¿‡è¿™ä¸ªå‰¯æœ¬æœ‰æ—¶å€™æ˜¯å˜é‡çš„å‰¯æœ¬ï¼Œæœ‰æ—¶å€™æ˜¯å˜é‡æŒ‡é’ˆçš„å‰¯æœ¬ã€‚

// è¿™ä¸ªå‡½æ•°ä¼ å‚æŒ‡é’ˆï¼Œè¿”å›å€¼æ˜¯intç±»å‹çš„å˜é‡
func incr (p *int) int {
	
    *p++
    rerurn *p
}

v := 1    // çŸ­å£°æ˜ä¸€ä¸ªå˜é‡vï¼Œå¹¶èµ‹å€¼
incr(&v)  // &vå–è¿™ä¸ªå˜é‡çš„æŒ‡é’ˆï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªå˜é‡åœ¨å†…å­˜ä¸­çš„åœ°å€ï¼Œå°†è¿™ä¸ªå˜é‡çš„åœ°å€åšä¸ºæŒ‡é’ˆä¼ å‚è¿›ä¸Šé¢é‚£ä¸ªå‡½æ•°ï¼Œ
fmt.Println(incr(&v))  //"3" vç°åœ¨æ˜¯3 


// æ¯æ¬¡ä½¿ç”¨å˜é‡çš„åœ°å€ï¼Œæˆ–è€…æ˜¯å¤åˆ¶ä¸€ä¸ªæŒ‡é’ˆï¼Œæˆ‘ä»¬å°±ç›¸å½“äºç»™å˜é‡åˆ›å»ºäº†ä¸€ä¸ª"åˆ«å"ã€‚ä¾‹å¦‚ p* æ˜¯ v çš„åˆ«åã€‚
// è¿™ç§åˆ«åæ–¹å¼æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ä½†åŒæ—¶ä¹Ÿæ˜¯åŒåˆƒå‰‘ï¼š
// ä¸ºäº†æ‰¾åˆ°æ‰€æœ‰è®¿é—®å˜é‡çš„è¯­å¥ï¼Œéœ€è¦çŸ¥é“æ‰¾åˆ°æ‰€æœ‰åˆ«åã€‚æ‰¾åˆ°æŒ‡é’ˆæ¯”æ‰¾åˆ°å˜é‡åè¦æ›´å¤æ‚ã€‚
```





```go
// gopl.io/ch2/echo4
package main 

import (
	"flag"
    "fmt"
    "strings"
)

// flag.Bool å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„ bool æ ‡è¯†å˜é‡ã€‚å®ƒæœ‰ä¸‰ä¸ªå‚æ•°:"æ ‡è¯†å","å˜é‡é»˜è®¤å€¼","å½“ç”¨æˆ·æä¾›éæ³•å‚æ•°çš„æç¤ºæ¶ˆæ¯"
// nè¡¨ç¤ºè¿™ä¸ªå˜é‡çš„æŒ‡é’ˆï¼Œn* è¡¨ç¤ºè¿™ä¸ªå˜é‡çš„å€¼
var n = flag.Bool("n", false, " omit tailing newline")
var sep = flag.String("s" ,"" , "seprator")

func main (){
    // æ›´æ–°æ ‡è¯†å˜é‡çš„é»˜è®¤å€¼
    // éæ ‡è¯†å‚æ•°ï¼Œä½¿ç”¨ flag.Args è¿”å›çš„å­—ç¬¦ä¸²sliceæ¥è®¿é—®
    flag.Parse()
    fmt.Pirntln(strings.Join(flag.Args(),*sep))
    if !*n {
        fmt.Println()
    }  
}


```

### new() å‡½æ•°åˆ›å»ºå˜é‡

å¦ä¸€ç§åˆ›å»ºå˜é‡çš„æ–¹å¼æ˜¯ä½¿ç”¨å†…ç½®çš„ new å‡½æ•°ï¼Œ

è¡¨è¾¾å¼` new(T)` åˆ›å»ºä¸€ä¸ªæœªå‘½åçš„ `T ç±»å‹å˜é‡`ï¼Œåˆå§‹åŒ–ä¸º T ç±»å‹çš„é›¶å€¼ï¼Œå¹¶è¿”å›å…¶åœ°å€ã€‚

**æ‰€ä»¥ new() å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªæŒ‡é’ˆ**

```go
// å½“ä½ åŠ¨æ€ç”³è¯·å†…å­˜çš„æ—¶å€™ï¼ŒæŒ‡é’ˆçš„å­˜åœ¨æ„ä¹‰ä¹‹ä¸€å°±è¢«ä½“ç°å‡ºæ¥äº†ï¼Œæ­¤æ—¶å¹¶æ²¡æœ‰å˜é‡èƒ½ç›´æ¥æŒ‡å‘è¿™å—å†…å­˜ï¼Œæ‰€ä»¥åªèƒ½é€šè¿‡å†…å­˜åœ°å€æ¥è®¿é—®

// å£°æ˜ä¸€ä¸ªintå˜é‡ï¼Œè¿™ä¸ªå˜é‡æ²¡æœ‰å˜é‡åï¼Œæ‰€ä»¥åªèƒ½èµ‹å€¼ç»™ä¸€ä¸ªæŒ‡é’ˆp,è¿™ä¸ªæ—¶å€™pæ˜¯ä¸€ä¸ªæŒ‡é’ˆã€‚
p := new(int)
// é€šè¿‡ *p å–å˜é‡å€¼ï¼Œæ‰“å°0
fmt.Println(*p)
*p = 2
// æ‰“å°2
fmt.Println(*p)

// ä½¿ç”¨ new() å‡½æ•°åˆ›å»ºçš„å˜é‡å’Œå–å…¶åœ°å€çš„æ™®é€šå˜é‡æ²¡ä»€ä¹ˆåŒºåˆ«ã€‚åªæ˜¯ä¸éœ€è¦å¼•å…¥å˜é‡åï¼Œé€šè¿‡ new(t) å°±å¯ä»¥ç›´æ¥åœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨ã€‚
// ä¸‹é¢è¿™ä¸¤ä¸ªå‡½æ•°ç­‰ä»·

func newInt() *int {
    return new(int)
}

func newInt() *int {
    var dummy int 
    return &dummy
}

// æ¯æ¬¡è°ƒç”¨ new éƒ½è¿”å›ä¸€ä¸ªå…·æœ‰å”¯ä¸€åœ°å€çš„ä¸åŒå˜é‡ã€‚
p := new(int)
q := new(int)
fmt.Println(p == q)  // false


// new æ˜¯ä¸€ä¸ªé¢„å£°æ˜çš„å‡½æ•°ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå…³é”®å­—ã€‚æ‰€ä»¥å¯ä»¥åœ¨è‡ªå·±çš„å‡½æ•°å†…é‡å®šä¹‰ä¸ºå…¶ä»–çš„ç±»å‹ï¼Œåœ¨è¿™ä¸ªå‡½æ•°å†…å°±ä¸èƒ½ä½¿ç”¨é¢„å£°æ˜çš„å†…ç½®newå‡½æ•°
func delta (old, new int ) int {
    return new - old 
}

```

### å˜é‡çš„ç”Ÿå‘½å‘¨æœŸ

å˜é‡çš„ç”Ÿå‘½å‘¨æœŸæ˜¯æŒ‡ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­å˜é‡æœ‰æ•ˆå­˜åœ¨çš„æ—¶é—´æ®µã€‚å¯¹äºåŒ…çº§åˆ«çš„å˜é‡ï¼Œå®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸå’Œæ•´ä¸ªç¨‹åºçš„è¿è¡Œå‘¨æœŸæ˜¯ä¸€è‡´çš„ã€‚

å±€éƒ¨å˜é‡çš„æœ‰ä¸€ä¸ªåŠ¨æ€çš„ç”Ÿå‘½å‘¨æœŸã€‚æ¯æ¬¡ä»åˆ›å»ºä¸€ä¸ªæ–°å˜é‡çš„å£°æ˜è¯­å¥å¼€å§‹ï¼Œç›´åˆ°è¯¥å˜é‡ä¸å†è¢«å¼•ç”¨ä¸ºæ­¢ï¼Œç„¶åå˜é‡çš„å­˜å‚¨ç©ºé—´å¯èƒ½è¢«å›æ”¶ã€‚å‡½æ•°çš„å‚æ•°å˜é‡å’Œè¿”å›å€¼å˜é‡éƒ½æ˜¯å±€éƒ¨å˜é‡ã€‚å®ƒä»¬åœ¨å‡½æ•°æ¯æ¬¡è¢«è°ƒç”¨çš„æ—¶å€™åˆ›å»ºã€‚



#### æ ˆå†…å­˜

æ ˆ å¯ä»¥ç®€å•å¾—ç†è§£æˆä¸€æ¬¡å‡½æ•°è°ƒç”¨å†…éƒ¨ç”³è¯·åˆ°çš„å†…å­˜ï¼Œå®ƒä»¬ä¼šéšç€å‡½æ•°çš„è¿”å›æŠŠå†…å­˜è¿˜ç»™ç³»ç»Ÿã€‚

```go

func F() {
	temp := make([]int, 0, 20)
	...
}
// ç±»ä¼¼äºä¸Šé¢ä»£ç é‡Œé¢çš„tempå˜é‡ï¼Œåªæ˜¯å†…å‡½æ•°å†…éƒ¨ç”³è¯·çš„ä¸´æ—¶å˜é‡ï¼Œå¹¶ä¸ä¼šä½œä¸ºè¿”å›å€¼è¿”å›ï¼Œå®ƒå°±æ˜¯è¢«ç¼–è¯‘å™¨ç”³è¯·åˆ°æ ˆé‡Œé¢ã€‚
```



**ç”³è¯·åˆ° æ ˆå†…å­˜ å¥½å¤„ï¼šå‡½æ•°è¿”å›ç›´æ¥é‡Šæ”¾ï¼Œä¸ä¼šå¼•èµ·åƒåœ¾å›æ”¶ï¼Œå¯¹æ€§èƒ½æ²¡æœ‰å½±å“ã€‚**





#### å †å†…å­˜

è¿™æ®µä»£ç ï¼Œä¸ä¸Šé¢ä¸€æ ·ï¼Œåªæ˜¯ç”³è¯·åä½œä¸ºè¿”å›å€¼è¿”å›äº†ï¼Œç¼–è¯‘å™¨ä¼šè®¤ä¸ºå˜é‡ä¹‹åè¿˜ä¼šè¢«ä½¿ç”¨ï¼Œå½“å‡½æ•°è¿”å›ä¹‹åå¹¶ä¸ä¼šå°†å…¶å†…å­˜å½’è¿˜ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šè¢«ç”³è¯·åˆ° **å †å†…å­˜ç©ºé—´** ä¸Šé¢äº†ã€‚

ç”³è¯·åˆ°å †ä¸Šé¢çš„å†…å­˜æ‰ä¼šå¼•èµ·åƒåœ¾å›æ”¶ï¼Œå¦‚æœè¿™ä¸ªè¿‡ç¨‹ï¼ˆç‰¹æŒ‡åƒåœ¾å›æ”¶ä¸æ–­è¢«è§¦å‘ï¼‰è¿‡äºé«˜é¢‘å°±ä¼šå¯¼è‡´ gc å‹åŠ›è¿‡å¤§ï¼Œç¨‹åºæ€§èƒ½å‡ºé—®é¢˜ã€‚

```go
func F() []int{
	a := make([]int, 0, 20)
	return a
}
```



```go
func F() {
    a := make([]int, 0, 20)     // æ ˆ ç©ºé—´å°
    b := make([]int, 0, 20000) // å †  ç©ºé—´è¿‡å¤§
 
	l := 20
	c := make([]int, 0, l)  // å † åŠ¨æ€åˆ†é…ä¸å®šç©ºé—´
}

// åƒæ˜¯ b è¿™ç§ å³ä½¿æ˜¯ä¸´æ—¶å˜é‡ï¼Œç”³è¯·è¿‡å¤§ä¹Ÿä¼šåœ¨å †ä¸Šé¢ç”³è¯·ã€‚
// å¯¹äº c ç¼–è¯‘å™¨ï¼Œå¯¹äºè¿™ç§ä¸å®šé•¿åº¦çš„ç”³è¯·æ–¹å¼ï¼Œä¹Ÿä¼šåœ¨å †ä¸Šé¢ç”³è¯·ï¼Œå³ä½¿ç”³è¯·çš„é•¿åº¦å¾ˆçŸ­ã€‚
```



#### é€ƒé€¸åˆ†æ



> æ‰€è°“é€ƒé€¸åˆ†æï¼ˆEscape analysisï¼‰æ˜¯æŒ‡ç”±ç¼–è¯‘å™¨å†³å®šå†…å­˜åˆ†é…çš„ä½ç½®ï¼Œä¸éœ€è¦ç¨‹åºå‘˜æŒ‡å®šã€‚

åœ¨å‡½æ•°ä¸­ç”³è¯·ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼š

- å¦‚æœåˆ†é… åœ¨æ ˆä¸­ï¼Œåˆ™å‡½æ•°æ‰§è¡Œç»“æŸå¯è‡ªåŠ¨å°†å†…å­˜å›æ”¶ï¼›
- å¦‚æœåˆ†é…åœ¨å †ä¸­ï¼Œåˆ™å‡½æ•°æ‰§è¡Œç»“æŸå¯äº¤ç»™GCï¼ˆåƒåœ¾å›æ”¶ï¼‰å¤„ç†;

> æ³¨æ„ï¼Œå¯¹äºå‡½æ•°å¤–éƒ¨æ²¡æœ‰å¼•ç”¨çš„å¯¹è±¡ï¼Œä¹Ÿæœ‰å¯èƒ½æ”¾åˆ°å †ä¸­ï¼Œæ¯”å¦‚å†…å­˜è¿‡å¤§è¶…è¿‡æ ˆçš„å­˜å‚¨èƒ½åŠ›ã€‚





```go
// è¿™é‡Œ x ä½¿ç”¨å †å†…å­˜ç©ºé—´ï¼Œå› ä¸ºå®ƒåœ¨få‡½æ•°è¿”å›åï¼Œè¿˜å¯ä»¥ä» Global å˜é‡è®¿é—®ï¼Œè¿™ç§æƒ…å†µè¢«ç§°ä¸º x ä» f ä¸­é€ƒé€¸ã€‚

var Global *int 
func f(){
    var x int 
    x = 1 
    Global = &x 
}
```

### å˜é‡èµ‹å€¼

```go
// ç”¨æ¬§å‡ é‡Œå¾—ç®—æ³•è®¡ç®—ä¸¤ä¸ªæ•´æ•°çš„æœ€å¤§å…¬çº¦æ•°ï¼Œå¤šé‡èµ‹å€¼
func gcd(x , y int) int {
    for y!= 0 {
        x , y = y , x % y
    }
    return y
}

// è®¡ç®—
```



### åŒ¿åå˜é‡

æˆ‘ä»¬åœ¨ä½¿ç”¨ä¼ ç»Ÿçš„å¼ºç±»å‹è¯­è¨€ç¼–ç¨‹æ—¶ï¼Œç»å¸¸ä¼šå‡ºç°è¿™ç§æƒ…å†µï¼Œåœ¨è°ƒç”¨å‡½æ•°æ—¶ä¸ºäº†è·å–ä¸€ä¸ªå€¼ï¼Œå´å› ä¸ºè¯¥å‡½æ•°è¿”å›å¤šä¸ªå€¼è€Œä¸å¾—ä¸å®šä¹‰ä¸€å †æ²¡ç”¨çš„å˜é‡ã€‚

åœ¨Goä¸­è¿™ç§æƒ…å†µå¯ä»¥é€šè¿‡ç»“åˆä½¿ç”¨å¤šé‡è¿”å›å’ŒåŒ¿åå˜é‡æ¥é¿å…è¿™ç§ä¸‘é™‹çš„å†™æ³•ï¼Œè®©ä»£ç çœ‹èµ·æ¥æ›´åŠ ä¼˜é›…ã€‚

```go
// å‡è®¾ GetName å‡½æ•°è¿”å›ä¸‰ä¸ªå€¼ï¼Œ åˆ†åˆ«ä¸º firstNameï¼ŒlastName å’Œ nickName
func GetName() (firstName, lastName, nickName string) {
	return "May", "Chan", "Chibi Maruko"
}
// å¦‚æœåªæƒ³è·å¾— nickName ï¼Œåˆ™å‡½æ•°è°ƒç”¨è¯­å¥å¯ä»¥ç”¨å¦‚ä¸‹æ–¹å¼ç¼–å†™
_, _, nickName := GetName()
```



### è·å–å˜é‡æ•°æ®ç±»å‹

åœ¨ golang ä¸­è·å–å˜é‡çš„æ•°æ®ç±»å‹ï¼Œä½¿ç”¨åå°„ï¼š

```go
// è·å–å˜é‡æ•°æ®ç±»å‹æ–¹æ³•1ï¼šé€šè¿‡åå°„
package main

import (
    "fmt"
    "reflect"
)

func main() {
    var x int32 = 20
    fmt.Println("the type of x is :", reflect.TypeOf(x))
}

// è·å–å˜é‡æ•°æ®ç±»å‹æ–¹æ³•2ï¼šè‡ªå®šä¹‰typeofæ–¹æ³•

package main

import "fmt"

func typeof(v interface{}) string {
    return fmt.Sprintf("%T", v)
}

func main() {
	var a = 234
	fmt.Print(typeof(a))
}

```



## å¸¸é‡

åœ¨ç¨‹åºè¿è¡ŒæœŸé—´ï¼Œä¸èƒ½ä¿®æ”¹çš„é‡ã€‚ä¸€èˆ¬ä½¿ç”¨ `const`  å…³é”®å­—å®šä¹‰ï¼Œå­˜å‚¨åœ¨å¸¸é‡ä¸­çš„æ•°æ®ç±»å‹åªå¯ä»¥æ˜¯å¸ƒå°”å‹ã€æ•°å­—å‹ï¼ˆæ•´æ•°å‹ã€æµ®ç‚¹å‹å’Œå¤æ•°ï¼‰å’Œå­—ç¬¦ä¸²å‹ã€‚

### å­—é¢å¸¸é‡

æ‰€è°“å­—é¢å¸¸é‡ï¼ˆliteralï¼‰ï¼Œæ˜¯æŒ‡ç¨‹åºä¸­ç¡¬ç¼–ç çš„å¸¸é‡ã€‚

åœ¨å…¶ä»–è¯­è¨€ä¸­ï¼Œå¸¸é‡é€šå¸¸æœ‰ç‰¹å®šçš„ç±»å‹ï¼Œæ¯”å¦‚ `-12` åœ¨Cè¯­è¨€ä¸­ä¼šè®¤ä¸ºæ˜¯ä¸€ä¸ª int ç±»å‹çš„å¸¸é‡ã€‚å¦‚æœè¦æŒ‡å®šä¸€ä¸ªå€¼ä¸º`-12`çš„ long ç±»å‹å¸¸é‡ï¼Œéœ€è¦å†™æˆ `-12l`ã€‚

Goè¯­è¨€çš„å­—é¢å¸¸é‡æ›´æ¥è¿‘æˆ‘ä»¬è‡ªç„¶è¯­è¨€ä¸­çš„å¸¸é‡æ¦‚å¿µï¼Œå®ƒæ˜¯æ— ç±»å‹çš„ã€‚åªè¦è¿™ä¸ªå¸¸é‡åœ¨ç›¸åº”ç±»å‹çš„å€¼åŸŸèŒƒå›´å†…ï¼Œå°±å¯ä»¥ä½œä¸ºè¯¥ç±»å‹çš„å¸¸é‡ã€‚

Goçš„å¸¸é‡å®šä¹‰å¯ä»¥é™å®šå¸¸é‡ç±»å‹ï¼Œä½†ä¸æ˜¯å¿…éœ€çš„ã€‚å¦‚æœå®šä¹‰å¸¸é‡æ—¶æ²¡æœ‰æŒ‡å®šç±»å‹ï¼Œé‚£ä¹ˆå®ƒä¸å­—é¢å¸¸é‡ä¸€æ ·ï¼Œæ˜¯æ— ç±»å‹å¸¸é‡ã€‚

å¸¸é‡å®šä¹‰çš„å³å€¼ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªåœ¨ç¼–è¯‘æœŸè®¡ç®—çš„å¸¸é‡è¡¨è¾¾å¼ï¼Œå¦‚ï¼š

```go
const mask = 1 << 3
```

ç”±äºå¸¸é‡çš„èµ‹å€¼æ˜¯ä¸€ä¸ªç¼–è¯‘æœŸè¡Œä¸ºï¼Œæ‰€ä»¥å³å€¼ä¸èƒ½å‡ºç°ä»»ä½•éœ€è¦è¿è¡ŒæœŸæ‰èƒ½å¾—å‡ºç»“æœçš„è¡¨è¾¾å¼ï¼Œæ¯”å¦‚è¯•å›¾ä»¥å¦‚ä¸‹æ–¹å¼å®šä¹‰å¸¸é‡å°±ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚

```go
// ç¼–è¯‘é”™è¯¯
const Home = os.GetEnv("HOME")
```



```go
// å£°æ˜ä¸€ä¸ªå¸¸é‡
const pi = 3.1415926
// æ‰¹é‡å£°æ˜å¤šä¸ªå¸¸é‡
const ï¼ˆ
	statusOK = 200
	notFound = 404
ï¼‰
// å¦‚æœæ‰¹é‡å£°æ˜å¤šä¸ªå¸¸é‡ï¼Œåé¢çš„å¸¸é‡æ²¡æœ‰èµ‹å€¼ï¼Œåˆ™å–å‰é¢çš„å¸¸é‡å€¼
const (
	n1 = 100
    n2
    n3
)

```



### å¸¸é‡è®¡æ•°å™¨

`iota` æ˜¯ä¸€ä¸ªå¸¸é‡è®¡æ•°å™¨ï¼Œåªèƒ½åœ¨å¸¸é‡çš„è¡¨è¾¾å¼ä¸­ä½¿ç”¨ã€‚

åœ¨æ¯ä¸€ä¸ª const å…³é”®å­—å‡ºç°æ—¶è¢«é‡ç½®ä¸º0ã€‚ç„¶ååœ¨ä¸‹ä¸€ä¸ª const å‡ºç°ä¹‹å‰ï¼Œæ¯å‡ºç°ä¸€æ¬¡ iota ï¼Œå…¶æ‰€ä»£è¡¨çš„æ•°å­—ä¼šè‡ªåŠ¨å¢1ã€‚





 

### æšä¸¾

æšä¸¾æŒ‡ä¸€ç³»åˆ—ç›¸å…³çš„å¸¸é‡ï¼Œæ¯”å¦‚ä¸‹é¢å…³äºä¸€ä¸ªä¸‹æ˜ŸæœŸä¸­æ¯å¤©çš„å®šä¹‰ã€‚const åè·Ÿä¸€å †åœ†æ‹¬å·çš„æ–¹å¼å®šä¹‰ä¸€ç»„å¸¸é‡ã€‚

```go
const (
	Sunday = iota 
    Monday
	Tuesday
	Wednesday
	Thursday
	Friday
	Saturday
	numberOfDays  // è¿™ä¸ªå¸¸é‡é€šå¸¸ä¸å¯¼å‡º
)
```





## è‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼ˆtypeå…³é”®å­—ï¼‰

`type` å£°æ˜ä¸ºå®šä¹‰ä¸€ä¸ªæ–°çš„`å‘½åç±»å‹`ï¼Œå®ƒå’ŒæŸä¸ªå·²çŸ¥çš„ç±»å‹ä½¿ç”¨åŒæ ·çš„`åº•å±‚ç±»å‹`ï¼Œå®ƒçš„æ ¼å¼å¦‚ä¸‹ï¼š

```
type name underlying-type
```

ç±»å‹çš„å£°æ˜é€šå¸¸å‡ºç°åœ¨åŒ…çº§åˆ«ï¼Œä¸€èˆ¬åœ¨æ•´ä¸ªåŒ…å†…éƒ½å¯ä»¥å¯è§ï¼Œå¦‚æœåå­—æ˜¯å¯¼å‡ºçš„ï¼ˆå¼€å¤´å¤§å†™ï¼‰ï¼Œå…¶ä»–çš„åŒ…ä¹Ÿå¯ä»¥è®¿é—®åˆ°ã€‚

> è¯‘æ³¨ï¼šå¯¹äºä¸­æ–‡æ±‰å­—ï¼ŒUnicodeæ ‡å¿—éƒ½ä½œä¸ºå°å†™å­—æ¯å¤„ç†ï¼Œå› æ­¤ä¸­æ–‡çš„å‘½åé»˜è®¤ä¸èƒ½å¯¼å‡ºï¼›
>

```go
// è¿›è¡Œåæ°æ¸©åº¦å’Œæ‘„æ°æ¸©åº¦çš„è½¬æ¢è®¡ç®—

// è¿™ä¸ªåŒ…å®šä¹‰ä¸¤ä¸ªç±»å‹ï¼šæ‘„æ°æ¸©åº¦ç±»å‹å’Œåæ°æ¸©åº¦ç±»å‹ï¼Œå®ƒä»¬çš„åº•å±‚ç±»å‹éƒ½æ˜¯float64
// æ–°å»ºä¸‰ä¸ªæ‘„æ°æ¸©åº¦ç±»å‹çš„å¸¸é‡ï¼šç»å¯¹é›¶åº¦ï¼Œç»“å†°ç‚¹æ¸©åº¦ï¼Œæ²¸æ°´æ¸©åº¦
// CToFå’ŒFToCä¸¤ä¸ªå‡½æ•°ï¼Œåˆ†åˆ«æ¥æ”¶ä¸åŒç±»å‹çš„å‚æ•°ï¼Œå¹¶ç»è¿‡è®¡ç®—åï¼Œå†è¿›è¡Œè½¬å‹æ“ä½œã€‚

package tempconv

import "fmt"

type Celsius float64
type Fahrenheit float64


const (
	AbsoluteZero Celsisus = -273.15
    FreezingC    Celsisus = 0
    BoilingC     Celsisus = 100
)

func CToF(c Celsius) Fahrenheit {
    return Fahrenheit(c*9/5 + 32)
}

func FToC(f Fahrenheit) Celsius {
    return Celsius((f - 32) * 5 / 9)
}



```

**å¯¹äºæ¯ä¸ªç±»å‹ Tï¼Œéƒ½æœ‰ä¸€ä¸ªç±»å‹è½¬è½¬æ“ä½œT(x)ï¼Œç”¨äºå°† x è½¬æ¢ä¸º T ç±»å‹ï¼Œå¦‚æœ T æ˜¯æŒ‡é’ˆï¼Œå¯èƒ½éœ€è¦ (*int) (0) è¿™ç§æ ¼å¼ã€‚**

**åªæœ‰å½“ä¸¤ä¸ªç±»å‹çš„åº•å±‚åŸºç¡€ç±»å‹ç›¸åŒæ—¶ï¼Œæ‰å…è®¸è¿™ç§è½¬å‹æ“ä½œï¼Œæˆ–è€…æ˜¯ä¸¤è€…éƒ½æ˜¯æŒ‡å‘ç›¸åŒåº•å±‚ç»“æ„çš„æŒ‡é’ˆç±»å‹**

**åº•å±‚æ•°æ®ç±»å‹å†³å®šäº†å†…éƒ¨ç»“æ„å’Œè¡¨è¾¾æ–¹å¼ï¼Œä¹Ÿå†³å®šæ˜¯å¦å¯ä»¥åƒåº•å±‚ç±»å‹ä¸€æ ·å¯¹å†…ç½®è¿ç®—ç¬¦çš„æ”¯æŒã€‚è¿™æ„å‘³ç€ï¼ŒCelsiuså’ŒFahrenheitç±»å‹çš„ç®—æœ¯è¿ç®—è¡Œä¸ºå’Œåº•å±‚çš„ float64 ç±»å‹æ˜¯ä¸€æ ·çš„**ã€‚

```go
// ä¸¤ä¸ªCelsisusç±»å‹çš„å¸¸é‡ç›¸å‡ï¼Œå¾—åˆ°"100" 
fmt.Printf("%g\n", BoilingC-FreezingC) // "100" Â°C
// è°ƒCToFå‡½æ•°ï¼Œè¿”å›Fahrenheitç±»å‹çš„å€¼èµ‹ç»™boilingFå˜é‡
boilingF := CToF(BoilingC)
// ä¸¤ä¸ªFahrenheitç±»å‹çš„å˜é‡è¿›è¡Œæ“ä½œ
fmt.Printf("%g\n", boilingF-CToF(FreezingC)) // "180" Â°F
// ç¼–è¯‘æŠ¥é”™ï¼ŒFahrenheitç±»å‹çš„å˜é‡ä¸èƒ½ä¸Celsisusç±»å‹çš„å¸¸é‡ç›´æ¥è®¡ç®—ï¼Œcompile error: type mismatch
fmt.Printf("%g\n", boilingF-FreezingC) 
```



## åŸºæœ¬æ•°æ®ç±»å‹



### æ•´å‹

#### æ— ç¬¦å·æ•´å‹

| Type  | Size                        | Range              |
| :---- | :-------------------------- | :----------------- |
| int8  | 8 bits      ï¼ˆ8ä¸ªäºŒè¿›åˆ¶ä½ï¼‰ | -128 to 127        |
| int16 | 16 bits   ï¼ˆ16ä¸ªäºŒè¿›åˆ¶ä½ï¼‰  | -2^15 to 2^15 -1   |
| int32 | 32 bits    ï¼ˆ16ä¸ªäºŒè¿›åˆ¶ä½ï¼‰ | -2^31 to 2^31 -1   |
| int64 | 64 bits    ï¼ˆ64ä¸ªäºŒè¿›åˆ¶ä½ï¼‰ | -2^63 to 2^63^ -1  |
| int   | Platform dependent          | Platform dependent |

#### æœ‰ç¬¦å·æ•´å‹

| Type   | Size               | Range              |
| :----- | :----------------- | :----------------- |
| uint8  | 8 bits             | 0 to 255           |
| uint16 | 16 bits            | 0 to 2^16 -1       |
| uint32 | 32 bits            | 0 to 2^32 -1      |
| uint64 | 64 bits            | 0 to 2^64 -1      |
| uint   | Platform dependent | Platform dependent |

```go

// ä¸å¹³å°æœ‰å…³çš„æ•´å‹ï¼ˆ32ä½æ¶æ„æˆ–64ä½æ¶æ„ï¼‰
uint     	// either 32 or 64 bits  
int      	// same size as uint   å³ä½¿åœ¨æŸä¸€ä¸ªæ¶æ„ä¸­ï¼Œint å’Œ int32 ç±»å‹çš„å˜é‡æœ‰ä¸€æ ·äºŒè¿›åˆ¶ä½æ•°ï¼Œä½†æ˜¯å®ƒä»¬è¿˜æ˜¯ä¸æ˜¯ä¸€æ ·çš„ç±»å‹

// é€šå¸¸å£°æ˜ä¸€ä¸ªæ•´å‹å˜é‡ï¼Œå¤§å¤šæ•°éƒ½æ˜¯ int ç±»å‹
var i = 123 // içš„ç±»å‹æ˜¯intç±»å‹


```



### æ•´å‹å­—é¢é‡

**äºŒè¿›åˆ¶ï¼ˆbinaryï¼‰**

ä½¿ç”¨å‰ç¼€ `0b` æˆ– `0B` æ¥è¡¨ç¤ºäºŒè¿›åˆ¶æ•°ï¼Œå¦‚ `0b0010` 

**å…«è¿›åˆ¶ï¼ˆoctalï¼‰**

ä½¿ç”¨å‰ç¼€ `0o` æˆ– `0O` ï¼ˆå‰é¢æ˜¯æ•°å­—é›¶ï¼Œåé¢æ˜¯å­—æ¯æ¬§ï¼‰æ¥è¡¨ç¤ºå…«è¿›åˆ¶æ•°ï¼Œå¦‚ `0o70`

**åå…­è¿›åˆ¶**

ä½¿ç”¨å‰ç¼€ `0x` or `0X` æ¥è¡¨ç¤ºåå…­è¿›åˆ¶æ•°ï¼Œå¦‚ 



ä¸ºäº†å¯è¯»æ€§ï¼Œåœ¨è¿›åˆ¶å‰ç¼€å’Œåé¢çš„æ•°å­—ä¹‹é—´ï¼Œå¯ä»¥åŠ ä¸Š `_` è¿™æ ·çš„ä¸‹åˆ’çº¿æ¥åŒºåˆ†ã€‚

```go
package main

import "fmt"

func main() {
	// åå…­è¿›åˆ¶ä»¥0x_å‰ç¼€å¼€å¤´è¡¨ç¤º
	var i1 = 0x_ff
	// åè¿›åˆ¶æ­£å¸¸è¡¨ç¤º
	var i2 = 100
	// å…«è¿›åˆ¶ä»¥0o_å‰ç¼€å¼€å¤´
	var i3 = 0o_177
	// äºŒè¿›åˆ¶ä»¥0b_å‰ç¼€å¼€å¤´
	var i4 = 0b_00001011
	// æ ¼å¼åŒ–è¾“å‡ºæ—¶ï¼Œ%d å ä½ç¬¦è¡¨ç¤ºåè¿›åˆ¶(decimal)
	fmt.Println("åè¿›åˆ¶æ‰“å°")
	fmt.Printf("i1= %d %T\n", i1, i1)
	fmt.Printf("i2= %d %T\n", i2, i2)
	fmt.Printf("i3= %d %T\n", i3, i3)
	fmt.Printf("i4= %d %T\n", i4, i4)
	fmt.Println()
	// æ ¼å¼åŒ–è¾“å‡ºæ—¶ï¼Œ%o å ä½ç¬¦è¡¨ç¤ºå…«è¿›åˆ¶(octal)
	fmt.Println("å…«è¿›åˆ¶æ‰“å°")
	fmt.Printf("i1= %o %T\n", i1, i1)
	fmt.Printf("i2= %o %T\n", i2, i2)
	fmt.Printf("i3= %o %T\n", i4, i4)
	fmt.Println()
	// æ ¼å¼åŒ–è¾“å‡ºæ—¶ï¼Œ%x å ä½ç¬¦è¡¨ç¤ºåå…­è¿›åˆ¶(hexadecimal)
	fmt.Println("åå…­è¿›åˆ¶æ‰“å°")
	fmt.Printf("i1= %x %T\n", i1, i1)
	fmt.Printf("i2= %x %T\n", i2, i2)
	fmt.Printf("i3= %x %T\n", i3, i3)
	fmt.Printf("i4= %x %T\n", i4, i4)
	fmt.Println()
}

// ç¨‹åºè¾“å‡ºï¼š

// åè¿›åˆ¶æ‰“å°
// i1= 255 int
// i2= 100 int
// i3= 127 int
// i4= 11 int

// å…«è¿›åˆ¶æ‰“å°
// i1= 377 int
// i2= 144 int
// i3= 13 int

// åå…­è¿›åˆ¶æ‰“å°
// i1= ff int
// i2= 64 int
// i3= 7f int
// i4= b int


```



### å­—ç¬¦ç±»å‹

ä¸¥æ ¼æ¥è¯´ï¼Œè¿™å¹¶ä¸æ˜¯ Go è¯­è¨€çš„ä¸€ä¸ªç±»å‹ï¼Œå­—ç¬¦åªæ˜¯æ•´å‹çš„ç‰¹æ®Šç”¨ä¾‹ã€‚

åœ¨ golang ä¸­ï¼Œå­—ç¬¦ä¸²ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ å«åš â€œå­—ç¬¦â€ï¼Œåœ¨éå†æˆ–è€…å•ä¸ªè·å–å­—ç¬¦ä¸²å…ƒç´ æ—¶å¯ä»¥è·å¾—å­—ç¬¦ã€‚

åœ¨ go ä¸­ï¼Œæ²¡æœ‰ char è¿™ç§å­—ç¬¦ç±»å‹ï¼Œæˆ‘ä»¬å£°æ˜çš„ 'A' , 'ä¸­' è¿™ç§å­—ç¬¦å¸¸é‡ï¼Œå…¶æ•°æ®ç±»å‹å®é™…ä¸Šæ˜¯ int32  

 byte å’Œ rune ç±»å‹å®é™…ä¸Šæ˜¯ uint8 å’Œ int32 çš„ç±»å‹åˆ«åã€‚

- **byte**ï¼Œå ç”¨1ä¸ªèŠ‚å­—ï¼Œå…± 8 ä¸ªæ¯”ç‰¹ä½ï¼Œå®ƒå’Œ `uint8` ç±»å‹æœ¬è´¨ä¸Šæ²¡æœ‰åŒºåˆ«ï¼Œå®ƒè¡¨ç¤ºçš„æ˜¯ ACSII è¡¨ä¸­çš„ä¸€ä¸ªå­—ç¬¦ã€‚
- **rune**ï¼Œå ç”¨4ä¸ªå­—èŠ‚ï¼Œå…± 32 ä¸ªæ¯”ç‰¹ä½ï¼Œå®ƒå’Œ `int32` æœ¬è´¨ä¸Šä¹Ÿæ²¡æœ‰åŒºåˆ«ã€‚å®ƒè¡¨ç¤ºçš„æ˜¯ä¸€ä¸ª Unicode å­—ç¬¦ã€‚



```go
// byteç±»å‹ç›¸å…³ç¤ºä¾‹

// var a byte = 65              // åœ¨ ASCII ç è¡¨ä¸­ï¼ŒA çš„å€¼æ˜¯ 65ï¼Œåè¿›åˆ¶è¡¨ç¤º
// var a byte = '\101'  		// 65çš„å…«è¿›åˆ¶å†™æ³•
// var c byte = '\x41'  		// åå…­è¿›åˆ¶å†™æ³•

var a = 'A'                     // è‹±æ–‡å­—ç¬¦çš„å­—é¢å¸¸é‡
fmt.Println(a)         			// unicodeç¼–ç ï¼š65
fmt.Println(reflect.TypeOf(a)) 	// è‹±æ–‡å­—ç¬¦ï¼šint32 

var b = 'ä¸­'                   	// ä¸­æ–‡å­—ç¬¦å¸¸é‡  
fmt.Println(b)                 	// unicodeç¼–ç ï¼š20013
fmt.Println(reflect.TypeOf(b)) 	// ä¸­æ–‡å­—ç¬¦ï¼šint32


var c = 65                     // æ•´å‹å¸¸é‡  
fmt.Println(c)                 // 65
fmt.Println(reflect.TypeOf(c)) // int

var y byte = 'ä¸­'                // ç¼–è¯‘é”™è¯¯ï¼Œ'ä¸­'å­—é¢é‡æ˜¯ unicode ç¼–ç ï¼Œå å››ä¸ªå­—èŠ‚ï¼Œæ— æ³•è¢«èµ‹å€¼ç»™ä¸€ä¸ªå­—èŠ‚çš„byteç±»å‹ï¼Œconstant 20013 overflows byte

var b = "B"                     // åœ¨goä¸­ï¼ŒåŒå¼•å·æ‹¬èµ·æ¥çš„å¸¸é‡æ˜¯å­—ç¬¦ä¸²ï¼Œå³ä½¿åªåŒ…å«ä¸€ä¸ªå­—ç¬¦ã€‚ 
fmt.Println(string(b))          // B
fmt.Println(reflect.TypeOf(b))  // string



// runeç±»å‹ç›¸å…³ç¤ºä¾‹
// å¦‚æœè¦è¡¨ç¤ºunicodeä¸­çš„å­—ç¬¦ï¼Œå°±éœ€è¦runeç±»å‹

var y rune = 'ä¸­'
fmt.Println(y)                   // 20013 
fmt.Println(reflect.TypeOf(y))   // int32 



// å­—ç¬¦ä¸²ç±»å‹
var d = "ğŸ˜€"                    // emojiå­—ç¬¦ä¸²
fmt.Println(d)                  // ğŸ˜€
fmt.Println(reflect.TypeOf(d))  // string
```



### æµ®ç‚¹æ•°

Goè¯­è¨€æ”¯æŒä¸¤ç§æµ®ç‚¹æ•° float32 å’Œ float64 ã€‚

float32å¤§çº¦å¯ä»¥æä¾›å°æ•°ç‚¹å 6 ä½çš„ç²¾åº¦ï¼Œä½œä¸ºå¯¹æ¯”ï¼Œfloat64 å¯ä»¥æä¾›å°æ•°ç‚¹å 15 ä½çš„ç²¾åº¦ã€‚é€šå¸¸æƒ…å†µåº”è¯¥ä¼˜å…ˆé€‰æ‹© float64ã€‚

32ä½æµ®ç‚¹æ•°æœ€å¤§å€¼æ˜¯ `math.MaxFloat32`

64ä½æµ®ç‚¹æ•°æœ€å¤§å€¼æ˜¯ `math.MaxFloat64` ,  // é»˜è®¤Goè¯­è¨€ä¸­çš„å°æ•°éƒ½æ˜¯ float64 ç±»å‹



### nil

golangä¸­çš„`nil`ï¼Œå¾ˆå¤šäººéƒ½è¯¯ä»¥ä¸ºä¸ Javaã€PHP ç­‰ç¼–ç¨‹è¯­è¨€ä¸­çš„ null ä¸€æ ·ï¼Œä½†æ˜¯å®é™…ä¸Šå¤æ‚å¾ˆå¤šã€‚

`nil` ä¸ºé¢„å£°æ˜çš„æ ‡ç¤ºç¬¦ï¼Œå®šä¹‰åœ¨`builtin/builtin.go` ä¸­ã€‚

```go
// nil is a predeclared identifier representing the zero value for a pointer, channel, func, interface, map, or slice type.
// Type must be a pointer, channel, func, interface, map, or slice type

// ç®€å•è¯´ï¼Œnilå°±æ˜¯ pointer, channel, func, interface, map, or slice è¿™äº›ç±»å‹å˜é‡çš„é›¶å€¼
var nil Type 

// Type is here for the purposes of documentation only. It is a stand-in
// for any Go type, but represents the same type for any given function
// invocation.
type Type int
```

#### nilçš„é›¶å€¼

æŒ‰ç…§ Go è¯­è¨€è§„èŒƒï¼Œä»»ä½•ç±»å‹åœ¨æœªåˆå§‹åŒ–æ—¶éƒ½å¯¹åº”ä¸€ä¸ªé›¶å€¼ï¼š

- å¸ƒå°”ç±»å‹æ˜¯falseï¼Œæ•´å‹æ˜¯0ï¼Œå­—ç¬¦ä¸²æ˜¯""ï¼Œ
- **æŒ‡é’ˆã€å‡½æ•°ã€interfaceã€sliceã€channelå’Œmapçš„é›¶å€¼éƒ½æ˜¯ nilã€‚**

Go ä¸­çš„ nil å¹¶ä¸æ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œ



ä¸šåŠ¡ä¸­ä¸€èˆ¬å°†`nil`å€¼è¡¨ç¤ºä¸ºå¼‚å¸¸ã€‚nil å€¼çš„å¤§å°å§‹ç»ˆä¸å…¶ç±»å‹ä¸`nil`å€¼ç›¸åŒçš„`non-nil`å€¼å¤§å°ç›¸åŒã€‚å› æ­¤, è¡¨ç¤ºä¸åŒé›¶å€¼çš„nilæ ‡è¯†ç¬¦å¯èƒ½å…·æœ‰ä¸åŒçš„å¤§å°ã€‚



```go
f, err := os.Open(filename)
if err != nil {
	log.Println("Open file failed:", err)
	return
}
defer f.Close()


func Add(a ,b int) (ret int, err error)  {
   if a < 0 || b < 0 {
      err= errors.New("Should be non-negative numbers!")
      return
   }
   return a+b ,nil

}
```



### å¤æ•°

`complex64` å’Œ `complex128` åˆ†åˆ«è¡¨ç¤ºå¤æ•°çš„å®éƒ¨å’Œè™šéƒ¨



### å¸ƒå°”ç±»å‹

Go è¯­è¨€ä¸­ä»¥ `bool` å£°æ˜å¸ƒå°”å‹æ•°æ®ï¼Œå¸ƒå°”å‹åªæœ‰ true å’Œ false ä¸¤ä¸ªå€¼ã€‚

æ³¨æ„ï¼š

- å¸ƒå°”ç±»å‹å˜é‡çš„é»˜è®¤å€¼æ˜¯ false 
- Go è¯­è¨€ä¸­ä¸å…è®¸å°†æ•´å‹å¼ºåˆ¶è½¬æ¢ä¸ºå¸ƒå°”å‹
- å¸ƒå°”å‹æ— æ³•å‚ä¸æ•°å€¼è¿ç®—ï¼Œä¹Ÿæ— æ³•ä¸å…¶ä»–ç±»å‹è½¬æ¢

if å’Œ for è¯­å¥çš„æ¡ä»¶éƒ¨åˆ†éƒ½æ˜¯å¸ƒå°”ç±»å‹çš„å€¼ï¼Œå¹¶ä¸” `==` å’Œ`<` ç­‰æ¯”è¾ƒæ“ä½œä¹Ÿä¼šäº§ç”Ÿå¸ƒå°”å‹çš„å€¼ã€‚

**Goè¯­è¨€å¯¹äºå€¼ä¹‹é—´çš„æ¯”è¾ƒæœ‰éå¸¸ä¸¥æ ¼çš„é™åˆ¶ï¼Œåªæœ‰ä¸¤ä¸ªç›¸åŒç±»å‹çš„å€¼æ‰å¯ä»¥è¿›è¡Œæ¯”è¾ƒ**

4





### å­—ç¬¦ä¸²

Go çš„ä½œè€… Ken Thompsonæ˜¯UTF-8 çš„å‘æ˜äººï¼ˆä¹Ÿæ˜¯C,Unix,Plan9ç­‰çš„åˆ›å§‹äººï¼‰ï¼Œå› æ­¤åœ¨å…³äºå­—ç¬¦ç¼–ç ä¸Šï¼ŒGoæœ‰ç€ç‹¬åˆ°è€Œå‘¨å…¨çš„è®¾è®¡ã€‚

Go è¯­è¨€ä¸­çš„å­—ç¬¦ä¸²æ˜¯åŸç”Ÿæ•°æ®ç±»å‹ï¼Œåœ¨å†…éƒ¨å®ç°ä½¿ç”¨ UTF-8 ç¼–ç ï¼Œç›¸æ¯”ä¹‹ä¸‹ï¼Œ C/C++è¯­è¨€ä¸­å¹¶ä¸å­˜åœ¨åŸç”Ÿçš„å­—ç¬¦ä¸²ç±»å‹ï¼Œé€šå¸¸ä½¿ç”¨å­—ç¬¦æ•°ç»„æ¥è¡¨ç¤ºï¼Œå¹¶ä»¥å­—ç¬¦æŒ‡é’ˆæ¥ä¼ é€’ã€‚

Goå°†å¤§éƒ¨åˆ†å­—ç¬¦ä¸²å¤„ç†çš„å‡½æ•°æ”¾åœ¨äº† `strings`,`bytes `è¿™ä¸¤ä¸ªåŒ…é‡Œã€‚å› ä¸ºåœ¨å­—ç¬¦ä¸²å’Œæ•´å‹é—´æ²¡æœ‰éšå¼ç±»å‹è½¬æ¢ï¼Œå­—ç¬¦ä¸²å’Œå…¶ä»–åŸºæœ¬ç±»å‹çš„è½¬æ¢çš„åŠŸèƒ½ä¸»è¦åœ¨æ ‡å‡†åº“`strconv`ä¸­æä¾›ã€‚

`unicode`ç›¸å…³åŠŸèƒ½åœ¨`unicode`åŒ…ä¸­æä¾›ã€‚`encoding`åŒ…æä¾›äº†ä¸€ç³»åˆ—å…¶ä»–çš„ç¼–ç æ”¯æŒã€‚



- Goè¯­è¨€æºä»£ç æ€»æ˜¯é‡‡ç”¨`UTF-8`ç¼–ç 
- å­—ç¬¦ä¸²`string`å¯ä»¥åŒ…å«ä»»æ„å­—èŠ‚åºåˆ—ï¼Œé€šå¸¸æ˜¯`UTF-8`ç¼–ç çš„ã€‚
- å­—ç¬¦ä¸²å­—é¢å€¼ï¼Œåœ¨ä¸å¸¦æœ‰å­—èŠ‚è½¬ä¹‰çš„æƒ…å†µä¸‹ä¸€å®šæ˜¯`UTF-8`ç¼–ç çš„ã€‚
- Goä½¿ç”¨`rune`ä»£è¡¨`Unicode`**ç ä½**ã€‚ä¸€ä¸ª**å­—ç¬¦**å¯èƒ½ç”±ä¸€ä¸ªæˆ–å¤šä¸ªç ä½ç»„æˆï¼ˆå¤åˆå­—ç¬¦ï¼‰
- Go stringæ˜¯å»ºç«‹åœ¨**å­—èŠ‚æ•°ç»„**çš„åŸºç¡€ä¸Šçš„ï¼Œå› æ­¤å¯¹stringä½¿ç”¨`[]`ç´¢å¼•ä¼šå¾—åˆ°å­—èŠ‚`byte`è€Œä¸æ˜¯å­—ç¬¦`rune`ã€‚
- Goè¯­è¨€çš„å­—ç¬¦ä¸²ä¸æ˜¯æ­£è§„åŒ–(`normalized`)çš„ï¼Œå› æ­¤åŒä¸€ä¸ªå­—ç¬¦å¯èƒ½ç”±ä¸åŒçš„å­—èŠ‚åºåˆ—è¡¨ç¤ºã€‚ä½¿ç”¨`unicode/norm`è§£å†³æ­¤ç±»é—®é¢˜ã€‚

- **å­—ç¬¦ä¸²çš„å€¼å¿…é¡»ä»¥åŒå¼•å·åŒ…è£¹ï¼ŒGoè¯­è¨€ä¸­å•å¼•å·åŒ…è£¹çš„æ˜¯å­—ç¬¦ç±»å‹**

```go
// çŸ­å£°æ˜å­—ç¬¦ä¸²ï¼Œå¹¶èµ‹å€¼
s := "Hello World"

// å•ç‹¬çš„å­—æ¯ï¼Œæ±‰å­—ï¼Œç¬¦å·è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦
c1 = 'h'
c2 = '1'

// å­—ç¬¦ä¸²çš„å†…å®¹å¯ä»¥ç”¨ç±»ä¼¼äºæ•°ç»„ä¸‹æ ‡çš„æ–¹å¼è·å–

var s2 = s[0]  // s2="H"



```



å¤šè¡Œå­—ç¬¦ä¸²





#### å­—ç¬¦ä¸²è½¬ä¹‰ç¬¦



|      |        |      |
| ---- | ------ | ---- |
| \n   | æ¢è¡Œç¬¦ |      |
|      |        |      |
|      |        |      |

#### å­—ç¬¦ä¸²å¸¸ç”¨å‡½æ•°

ç”±äº Go è¯­è¨€çš„å­—ç¬¦ä¸²éƒ½ä»¥ UTF-8 æ ¼å¼ä¿å­˜ï¼Œæ¯ä¸ªä¸­æ–‡å ç”¨ 3 ä¸ªå­—èŠ‚ï¼Œå› æ­¤ä½¿ç”¨ len() è·å¾—ä¸¤ä¸ªä¸­æ–‡æ–‡å­—å¯¹åº”çš„ 6 ä¸ªå­—èŠ‚ã€‚

UTF-8 åŒ…æä¾›çš„utf8.RuneCountInString() å‡½æ•°ç”¨æ¥ç»Ÿè®¡ **Unicode** å­—ç¬¦æ•°é‡ã€‚

```go
package main
 
import "fmt"
 
func main() {
	str1 := "hello world"
	fmt.Println(len(str1)) //11
 
	str2 := "ä½ å¥½"
	fmt.Println(len(str2)) //6
}



package main
 
import (
	"fmt"
	"unicode/utf8"
)
 
func main() {
	str1 := "hello world"
	fmt.Println(utf8.RuneCountInString(str1)) //11
 
	str2 := "ä½ å¥½"
	fmt.Println(utf8.RuneCountInString(str2)) //2
}

```





| æ“ä½œ     | æ–¹æ³•                                    | è¿”å›å€¼                               |
| -------- | --------------------------------------- | ------------------------------------ |
| é•¿åº¦     | len(s1)  utf8.RuneCountInString(s1)     | è¿”å›å­—ç¬¦ä¸² s1 çš„é•¿åº¦                 |
| æ‹¼æ¥     | s1+s2 æˆ–è€… fmt.Sprint( "%s%s", s1 , s2) | è¿”å›æ–°å­—ç¬¦ä¸²                         |
| åˆ†å‰²     | strings.Split(s1 , "\\")                | å°† s1 å­—ç¬¦ä¸²æŒ‰ \ åˆ†å‰²                |
| åŒ…å«     | strings.Contains(s1, "Hello")           | åˆ¤æ–­å­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å«å­ä¸²ï¼Œè¿”å›å¸ƒå°”å€¼ |
| å‰ç¼€åˆ¤æ–­ | fmt.HasPrefix(s1, "prefix")             | åˆ¤æ–­å­—ç¬¦ä¸²å‰ç¼€ä¸­æ˜¯å¦åŒ…å«ï¼Œè¿”å›å¸ƒå°”å€¼ |
| åç¼€åˆ¤æ–­ | strings.HasSuffix(s1,"suffix")          | åˆ¤æ–­å­—ç¬¦ä¸²åç¼€ä¸­æ˜¯å¦åŒ…å«ï¼Œè¿”å›å¸ƒå°”å€¼ |





### æ•°ç»„

æ•°ç»„æ˜¯Goè¯­è¨€ç¼–ç¨‹ä¸­æœ€å¸¸ç”¨çš„æ•°æ®ç»“æ„ä¹‹ä¸€ï¼Œåœ¨ go è¯­è¨€å†…éƒ¨ï¼Œæ•°ç»„å°±æ˜¯ä¸€ä¸ª**é•¿åº¦å›ºå®š**çš„æ•°æ®ç±»å‹ï¼Œç”¨äºå­˜å‚¨ä¸€æ®µå…·æœ‰ç›¸åŒçš„ç±»å‹çš„å…ƒç´ çš„è¿ç»­å—ã€‚

æ•°ç»„å­˜å‚¨çš„ç±»å‹å¯ä»¥æ˜¯å†…ç½®ç±»å‹ï¼Œå¦‚æ•´å‹æˆ–è€…å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯æŸç§ç»“æ„ç±»å‹ã€‚

æ•°ç»„æ˜¯ä¸€ç§éå¸¸æœ‰ç”¨çš„æ•°æ®ç»“æ„ï¼Œå› ä¸ºå…¶å ç”¨çš„å†…å­˜æ˜¯è¿ç»­åˆ†é…çš„ã€‚ç”±äºå†…å­˜è¿ç»­ï¼ŒCPUèƒ½æŠŠæ­£åœ¨ä½¿ç”¨çš„æ•°æ®ç¼“å­˜æ›´ä¹…çš„æ—¶é—´ã€‚

è€Œä¸”å†…å­˜è¿ç»­å¾ˆå®¹æ˜“è®¡ç®—ç´¢å¼•ï¼Œå¯ä»¥å¿«é€Ÿè¿­ä»£æ•°ç»„é‡Œçš„æ‰€æœ‰å…ƒç´ ã€‚æ•°ç»„çš„ç±»å‹ä¿¡æ¯å¯ä»¥æä¾›æ¯æ¬¡è®¿é—®ä¸€ä¸ªå…ƒç´ æ—¶éœ€è¦åœ¨å†…å­˜ä¸­ç§»åŠ¨çš„è·ç¦»ã€‚

æ—¢ç„¶æ•°ç»„çš„æ¯ä¸ªå…ƒç´ ç±»å‹ç›¸åŒï¼Œåˆæ˜¯è¿ç»­åˆ†é…ï¼Œå°±å¯ä»¥ä»¥å›ºå®šé€Ÿåº¦ç´¢å¼•æ•°ç»„ä¸­çš„ä»»æ„æ•°æ®ï¼Œé€Ÿåº¦éå¸¸å¿«ã€‚

```go
// å£°æ˜ä¸€ä¸ªåŒ…å«5ä¸ªå…ƒç´ çš„æ•´å‹æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ çš„é»˜è®¤å€¼ä¸ºå¯¹åº”ç±»å‹çš„é›¶å€¼
// ä¸€æ—¦å£°æ˜ï¼Œæ•°ç»„é•¿åº¦ä¸å¯å˜æ›´
var array [5]int

// å£°æ˜å¹¶åˆå§‹åŒ–ï¼Œä½¿ç”¨å­—é¢é‡æ¥åˆå§‹åŒ–æ•°ç»„
array1 := [5]int{10, 20, 30, 40, 50}

// ...è¡¨ç¤ºæ•°ç»„é•¿åº¦ï¼Œæ•°ç»„çš„å®¹é‡ç”±åé¢åˆå§‹åŒ–çš„å­—é¢å€¼çš„æ•°é‡è®¡ç®—å‡ºæ¥
array2 := [...]int{10, 20, 30, 40, 50}

// ç‰¹å®šå…ƒç´ åˆå§‹åŒ–ï¼Œå…¶ä½™å…ƒç´ é›¶å€¼ã€‚
array3 := [5]int{1: 10, 2: 20}

// æ•°ç»„ä¸­çš„å…ƒç´ æ˜¯æŒ‡é’ˆç±»å‹ã€‚5ä¸ªæŒ‡é’ˆï¼ˆæŒ‡å‘intç±»å‹å˜é‡çš„æŒ‡é’ˆï¼‰
array4 := [5]*int { 0: new(int), 1: new(int)}
// ä¸ºç´¢å¼•ä¸º 0 å’Œ 1 çš„å…ƒç´ èµ‹å€¼
*array4[0] = 10
*array4[1] = 20



// æ•°ç»„éå†

// ä¸Cè¯­è¨€ç›¸åŒï¼Œæ•°ç»„ä¸‹æ ‡ä»0å¼€å§‹ï¼Œ len(array)-1 åˆ™è¡¨ç¤ºæœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡

for i := 0; i < len(array);  i++ {
	fmt.Println("Element", i, "of array is", array[i])
}

// rangeéå†å®¹å™¨ä¸­çš„å…ƒç´ 
// rangeéå†è¿”å›ä¸¤ä¸ªå…ƒç´ ï¼Œä¸€ä¸ªæ˜¯æ•°ç»„ä¸‹æ ‡ï¼Œä¸€ä¸ªæ˜¯å…ƒç´ çš„å€¼
for i, v := range array {
	fmt.Println("Array element[", i, "]=", v)
}


```



**æ•°ç»„çš„æ“ä½œ**

åœ¨ Go è¯­è¨€é‡Œï¼Œæ•°ç»„æ˜¯ä¸€ä¸ªå€¼ã€‚è¿™æ„å‘³ç€æ•°ç»„å¯ä»¥ç”¨åœ¨èµ‹å€¼æ“ä½œä¸­ã€‚å˜é‡åä»£è¡¨æ•´ä¸ªæ•°ç»„ã€‚å› æ­¤ï¼ŒåŒæ ·ç±»å‹çš„æ•°ç»„å¯ä»¥èµ‹å€¼ç»™å¦ä¸€ä¸ªæ•°ç»„

```go
// å£°æ˜ç¬¬ä¸€ä¸ªåŒ…å« 4 ä¸ªå…ƒç´ çš„å­—ç¬¦ä¸²æ•°ç»„
var array1 [4]string

// å£°æ˜å¹¶åˆå§‹åŒ–ç¬¬äºŒä¸ªå­—ç¬¦ä¸²æ•°ç»„
array2 := [5]string{"Red", "Blue", "Green", "Yellow", "Pink"}

// åªæœ‰å½“æ•°ç»„é•¿åº¦ç›¸åŒï¼Œä¸”æ•°ç»„å…ƒç´ çš„ç±»å‹ç›¸åŒæ—¶ï¼Œæ‰èƒ½èµ‹å€¼ã€‚æ•°ç»„é•¿åº¦ä¸åŒï¼Œä¼šæº¢å‡ºã€‚go vet é˜¶æ®µå°±ä¼šæŠ¥é”™
// æ•°ç»„ä¹Ÿæ˜¯ä¸€ä¸ªæ•°æ®ç±»å‹ï¼Œæ•°ç»„å˜é‡çš„ç±»å‹åŒ…æ‹¬æ•°ç»„é•¿åº¦å’Œæ¯ä¸ªå…ƒç´ çš„ç±»å‹ã€‚åªæœ‰è¿™ä¸¤éƒ¨åˆ†éƒ½ç›¸åŒçš„æ•°ç»„ï¼Œæ‰æ˜¯ç±»å‹ç›¸åŒçš„æ•°ç»„ï¼Œæ‰èƒ½äº’ç›¸èµ‹å€¼
// å°† array2 å¤åˆ¶ç»™ array1
array1 = array2


// å¤åˆ¶æ•°å€¼æŒ‡é’ˆï¼Œåªä¼šå¤åˆ¶æŒ‡é’ˆå€¼ã€‚è€Œä¸ä¼šå¤åˆ¶æŒ‡é’ˆæ‰€æŒ‡å‘çš„å€¼ã€‚
// array1å’Œarray2è¿™ä¸¤ç»„æŒ‡é’ˆï¼Œéƒ½æŒ‡å‘è¿™äº›å­—ç¬¦å€¼çš„å†…å­˜åœ°å€

// å£°æ˜ç¬¬ä¸€ä¸ªåŒ…å«3ä¸ªå…ƒç´ çš„æŒ‡å‘å­—ç¬¦ä¸²çš„æŒ‡é’ˆæ•°ç»„1
var array1 [3]*string

// å£°æ˜ç¬¬ä¸€ä¸ªåŒ…å«3ä¸ªå…ƒç´ çš„æŒ‡å‘å­—ç¬¦ä¸²çš„æŒ‡é’ˆæ•°ç»„2
array2 := [3]*string{new(string), new(string), new(string)}

// ä¸ºç¬¬äºŒä¸ªæŒ‡é’ˆæ•°ç»„ä¸­çš„æŒ‡å‘çš„å­—ç¬¦ä¸²å˜é‡èµ‹å€¼ã€‚
*array2[0] = "Red"
*array2[1] = "Blue"
*array2[2] = "Green"

// å°† array2 èµ‹å€¼ç»™ array1
array1 = array2

// èµ‹å€¼ä¹‹åï¼Œä¸¤ä¸ªæ•°ç»„æŒ‡å‘åŒä¸€ç»„å­—ç¬¦ä¸²ï¼Œå³å®ƒä»¬çš„å˜é‡çš„å†…å­˜åœ°å€æ˜¯ä¸€æ ·çš„ã€‚

fmt.Println(array1)  // [0xc000042230 0xc000042240 0xc000042250]
fmt.Println(array2)  // [0xc000042230 0xc000042240 0xc000042250]




// å¤šç»´æ•°ç»„

// æ•°ç»„æœ¬èº«åªæœ‰ä¸€ä¸ªç»´åº¦ï¼Œä¸è¿‡å¯ä»¥ç»„åˆå¤šä¸ªæ•°ç»„åˆ›å»ºå¤šç»´æ•°ç»„ã€‚

// å£°æ˜ä¸€ä¸ªäºŒç»´æ•´å‹æ•°ç»„ï¼Œä¸¤ä¸ªç»´åº¦åˆ†åˆ«å­˜å‚¨ 4 ä¸ªå…ƒç´ å’Œ 2 ä¸ªå…ƒç´ 
var array [4][2]int
// ä½¿ç”¨æ•°ç»„å­—é¢é‡æ¥å£°æ˜å¹¶åˆå§‹åŒ–ä¸€ä¸ªäºŒç»´æ•´å‹æ•°ç»„
array := [4][2]int{{10, 11}, {20, 21}, {30, 31}, {40, 41}}
// å£°æ˜å¹¶åˆå§‹åŒ–å¤–å±‚æ•°ç»„ä¸­ç´¢å¼•ä¸º 1 ä¸ªå’Œ 3 çš„å…ƒç´ 
array := [4][2]int{1: {20, 21}, 3: {40, 41}}
// å£°æ˜å¹¶åˆå§‹åŒ–å¤–å±‚æ•°ç»„å’Œå†…å±‚æ•°ç»„çš„å•ä¸ªå…ƒç´ 
array := [4][2]int{1: {0: 20}, 3: {1: 41}}

// ä¸ºäº†è®¿é—®å•ä¸ªå…ƒç´ ï¼Œéœ€è¦åå¤ç»„åˆä½¿ç”¨[]è¿ç®—ç¬¦
// è®¾ç½®æ¯ä¸ªå…ƒç´ çš„æ•´å‹å€¼
array[0][0] = 10
```



**åœ¨å‡½æ•°é—´ä¼ é€’æ•°ç»„**

**åœ¨ go ä¸­ï¼Œæ•°ç»„æ˜¯å€¼ç±»å‹ï¼Œæ‰€æœ‰çš„å€¼ç±»å‹å˜é‡åœ¨èµ‹å€¼å’Œä½œä¸ºå‚æ•°ä¼ é€’æ—¶éƒ½å°†äº§ç”Ÿä¸€æ¬¡å¤åˆ¶åŠ¨ä½œã€‚å¦‚æœå°†æ•°ç»„ä½œä¸ºå‡½æ•°çš„å‚æ•°ç±»å‹ï¼Œåˆ™åœ¨å‡½æ•°è°ƒç”¨æ—¶è¯¥å‚æ•°å°†å‘ç”Ÿæ•°æ®å¤åˆ¶ã€‚**

**å› æ­¤ï¼Œåœ¨å‡½æ•°ä½“ä¸­æ— æ³•ä¿®æ”¹ä¼ å…¥çš„æ•°ç»„çš„å†…å®¹ï¼Œå› ä¸ºå‡½æ•°å†…æ“ä½œçš„åªæ˜¯æ‰€ä¼ å…¥æ•°ç»„çš„ä¸€ä¸ªå‰¯æœ¬ã€‚**

```go
package main

import "fmt"

func modify( array [5]int )  {
	array[0] = 10   // åœ¨å‡½æ•°ä¸­ä¿®æ”¹ä¼ å…¥çš„æ•°ç»„å‚æ•°çš„ç¬¬ä¸€ä¸ªå…ƒç´ 
	fmt.Println("In modify function , array value is ", array)
	
}

func main()  {
	// å£°æ˜å¹¶åˆå§‹åŒ–ä¸€ä¸ªåŒ…å«5ä¸ªå…ƒç´ çš„æ•´å‹æ•°ç»„
	array := [5]int {1,2,3,4,5}
	// è°ƒç”¨å‡½æ•°ï¼Œå®é™…å¹¶æœªä¿®æ”¹åŸæ•°ç»„ä¸­çš„å†…å®¹
	modify(array)
	// mainå‡½æ•°æ‰“å°æ•°ç»„ï¼Œä»ç„¶æ˜¯åŸæ•°ç»„çš„å€¼
	fmt.Println("In main(), array values is", array)

}

// In modify function , array value is  [10 2 3 4 5]
// In main(), array values is [1 2 3 4 5]
```





```go
// å£°æ˜ä¸€ä¸ª10Wä¸ªæ•´å‹çš„æ•°ç»„ï¼Œéœ€è¦8MBç©ºé—´
var array [1e6]int

// å°†æ•°ç»„ä¼ é€’ç»™å‡½æ•° foo
foo(array)

// å‡½æ•° foo æ¥å—ä¸€ä¸ª 100 ä¸‡ä¸ªæ•´å‹å€¼çš„æ•°ç»„ï¼Œéå†å¹¶æ‰“å°
func foo(array [1e6]int) {
    for i := 0; i < len(array); i++ {
         fmt.Print(array[i], "\t")
    }
}

// åƒä¸Šé¢è¿™ç§æƒ…å†µï¼Œæ¯æ¬¡å‡½æ•° foo è¢«è°ƒç”¨æ—¶ï¼Œå¿…é¡»åœ¨æ ˆä¸Šåˆ†é… 8 MB çš„å†…å­˜ï¼Œå°†æ•°ç»„ä¸­çš„å€¼å¤åˆ¶åˆ°å†…å­˜ä¸­ã€‚


// è¿™æ¬¡å‡½æ•°æ¥æ”¶çš„å‚æ•°æ˜¯æŒ‡é’ˆï¼Œæ˜¯ä¸€ä¸ªæŒ‡å‘ 100 ä¸‡ä¸ªæ•´å‹å€¼çš„æ•°ç»„çš„æŒ‡é’ˆã€‚
// ç°åœ¨å°†æ•°ç»„çš„åœ°å€ä¼ å…¥å‡½æ•°ï¼Œåªéœ€è¦åœ¨æ ˆä¸Šåˆ†é… 8 èŠ‚çš„å†…å­˜ç»™æŒ‡é’ˆå°±å¯ä»¥
var array [1e6]int
foo(&array)
func foo(array *[1e6]int) {
	...
}
```









### æ•°ç»„åˆ‡ç‰‡

åˆ‡ç‰‡å…¶å®å°±æ˜¯åŠ¨æ€æ•°ç»„ï¼Œå®ƒçš„é•¿åº¦å¹¶ä¸å›ºå®šï¼Œæˆ‘ä»¬å¯ä»¥éšæ„å‘åˆ‡ç‰‡ä¸­è¿½åŠ å…ƒç´ ï¼Œè€Œåˆ‡ç‰‡ä¼šåœ¨å®¹é‡ä¸è¶³æ—¶è‡ªåŠ¨æ‰©å®¹ã€‚

æ•°ç»„åˆ‡ç‰‡çš„æ•°æ®ç»“æ„å¯ä»¥æŠ½è±¡ä¸ºåŒ…å«ä¸‰ä¸ªå˜é‡çš„ç»“æ„ä½“ï¼š

- ä¸€ä¸ªæŒ‡å‘åŸç”Ÿåº•å±‚æ•°ç»„çš„æŒ‡é’ˆï¼›
- åˆ‡ç‰‡ä¸­çš„å…ƒç´ ä¸ªæ•°ï¼ˆå³é•¿åº¦ï¼‰ï¼›
- åˆ‡ç‰‡å…è®¸å¢é•¿çš„å…ƒç´ ä¸ªæ•°ï¼ˆå³å®¹é‡ï¼‰ï¼›



```go
// 
type slice struct {
  	array unsafe.Pointer
  	length int
  	capcity int
}
```



åˆ‡ç‰‡çš„åº•å±‚æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œåˆ‡ç‰‡çš„è¡¨å±‚æ˜¯ä¸€ä¸ªåŒ…å«ä¸‰ä¸ªå˜é‡çš„ç»“æ„ä½“ï¼Œå½“æˆ‘ä»¬å°†ä¸€ä¸ªåˆ‡ç‰‡èµ‹å€¼ç»™å¦ä¸€ä¸ªåˆ‡ç‰‡æ—¶ï¼Œæœ¬è´¨ä¸Šæ˜¯å¯¹åˆ‡ç‰‡è¡¨å±‚ç»“æ„ä½“çš„æµ…æ‹·è´ã€‚

ç»“æ„ä½“ä¸­ç¬¬ä¸€ä¸ªå˜é‡æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘åº•å±‚çš„æ•°ç»„ï¼Œå¦å¤–ä¸¤ä¸ªå˜é‡åˆ†åˆ«æ˜¯åˆ‡ç‰‡çš„é•¿åº¦å’Œå®¹é‡ã€‚

```go
// åˆ›å»ºåˆ‡ç‰‡åŸºæœ¬ä¸Šåˆ†ä¸ºä¸¤ç§æ–¹æ³•ï¼šåŸºäºæ•°ç»„åˆ›å»ºåˆ‡ç‰‡ï¼Œmakeå‡½æ•°ç›´æ¥åˆ›å»ºåˆ‡ç‰‡

// åŸºäºæ•°ç»„åˆ›å»ºåˆ‡ç‰‡
// æ‰€æœ‰å…ƒç´  mySlice = myArray[:] 
// å‰nä¸ªå…ƒç´  mySlice = myArray[:5]
// ä»ç¬¬nä¸ªå…ƒç´ å¼€å§‹ï¼ŒmySlice = myArray[5:]

// mySlice = myArray[x:y:z]
// ä»ç¬¬xä¸ªå…ƒç´ å¼€å§‹ï¼Œç¬¬zä¸ªå…ƒç´ æ­¢ï¼Œz-xæ˜¯å®¹é‡ï¼Œå¦‚æœz=yï¼Œå¯ä»¥çœç•¥


// ç›´æ¥åˆ›å»ºåˆ‡ç‰‡

// make(å…ƒç´ ç±»å‹,åˆ‡ç‰‡é•¿åº¦,åˆ‡ç‰‡å®¹é‡)
mySlice2 := make([]int, 5, 10)
// make(å…ƒç´ ç±»å‹,åˆ‡ç‰‡é•¿åº¦) 
// å½“é•¿åº¦å’Œå®¹é‡ç›¸åŒæ—¶ï¼Œå¯ä»¥çœç•¥å®¹é‡
mySlice1 := make([]int, 5)




// åˆ‡ç‰‡å­—é¢é‡
// å£°æ˜å­—ç¬¦ä¸²åˆ‡ç‰‡ï¼Œå…¶é•¿åº¦å’Œå®¹é‡éƒ½æ˜¯5ä¸ªå…ƒç´ ï¼Œè¿™è·Ÿæ•°ç»„çš„å£°æ˜å¾ˆåƒï¼Œåªæ˜¯ä¸éœ€è¦æŒ‡å®š[]è¿ç®—ç¬¦é‡Œçš„å€¼ã€‚é•¿åº¦å’Œå®¹é‡ç”±åˆå§‹åŒ–çš„å…ƒç´ ä¸ªæ•°å†³å®šã€‚
slice := []string{"Red", "Blue", "Green", "Yellow", "Pink"}

// å£°æ˜æ•´å‹åˆ‡ç‰‡ï¼Œå…¶é•¿åº¦å’Œå®¹é‡éƒ½æ˜¯3ä¸ªå…ƒç´ 
slice2 := []int{10, 20, 30}

// ä½¿ç”¨ç´¢å¼•å£°æ˜åˆ‡ç‰‡
// ä½¿ç”¨ç©ºå­—ç¬¦ä¸²åˆå§‹åŒ–ç¬¬100ä¸ªå…ƒç´ (è¿™ä¸ªåˆ‡ç‰‡çš„é•¿åº¦å’Œå®¹é‡æ˜¯100)
slice := []string{99: ""}


//  cap(slice) è¿”å›åˆ‡ç‰‡çš„å®¹é‡, len(slice) è¿”å›åˆ‡ç‰‡çš„é•¿åº¦


// nilåˆ‡ç‰‡
// ç¨‹åºå¯èƒ½éœ€è¦å£°æ˜ä¸€ä¸ªå€¼ä¸º nil çš„åˆ‡ç‰‡ï¼Œåªè¦å£°æ˜æ—¶ä¸åšä»»ä½•åˆå§‹åŒ–å°±ä¼šåˆ›å»ºç©ºåˆ‡ç‰‡
// åœ¨goä¸­ï¼Œnilåˆ‡ç‰‡æ˜¯å¾ˆå¸¸è§çš„åˆ›å»ºåˆ‡ç‰‡çš„æ–¹æ³•ï¼Œnilåˆ‡ç‰‡ç”¨äºå¾ˆå¤šæ ‡å‡†åº“å’Œå†…ç½®å‡½æ•°ã€‚

// åˆ‡ç‰‡ä¸­çš„å…ƒç´ æ˜¯æŒ‡é’ˆï¼ŒæŒ‡é’ˆçš„é›¶å€¼æ˜¯nilï¼Œæ‰€ä»¥æ˜¯
var s1 = make([]*int, 10)
fmt.Println(s1)  // [<nil> <nil> <nil> <nil> <nil> <nil> <nil> <nil> <nil> <nil>]

// åˆ‡ç‰‡ä¸­çš„å…ƒç´ éƒ½æ˜¯intï¼Œintç±»å‹çš„é›¶å€¼éƒ½æ˜¯0
var s = make([]int, 10)
fmt.Print(s)  // [0 0 0 0 0 0 0 0 0 0]


// ç©ºåˆ‡ç‰‡
// æ•´å‹ç©ºåˆ‡ç‰‡
var slice []int
fmt.Print(slice) // []
fmt.Print(reflect.TypeOf(slice))  //åˆ‡ç‰‡çš„æ•°æ®ç±»å‹ []int 

// ä½¿ç”¨ make åˆ›å»ºç©ºçš„æ•´å‹åˆ‡ç‰‡å˜é‡
slice := make([]int, 0)
// ç­‰ä»·äºä¸Šé¢ï¼Œä½¿ç”¨å­—é¢é‡åˆ›å»ºç©ºçš„æ•´å‹åˆ‡ç‰‡
slice := []int{}


// ä½¿ç”¨å­—é¢é‡åˆ›å»ºæ•´å‹åˆ‡ç‰‡ï¼Œå…¶å®¹é‡å’Œé•¿åº¦éƒ½æ˜¯ 5 ä¸ªå…ƒç´ 
slice := []int{10, 20, 30, 40, 50}

// ä½¿ç”¨åˆ‡ç‰‡åˆ›å»ºåˆ‡ç‰‡
// åˆ›å»ºä¸€ä¸ªåˆ‡ç‰‡ï¼Œå…¶é•¿åº¦ä¸º 2 ä¸ªå…ƒç´ ï¼Œå®¹é‡ä¸º 4 ä¸ªå…ƒç´ 
newSlice := slice[1:3]


// å¯¹åº•å±‚æ•°ç»„å®¹é‡æ˜¯ k çš„åˆ‡ç‰‡ slice[i:j]æ¥è¯´
// é•¿åº¦: j - i     len(s) lenå‡½æ•°è¿”å›åˆ‡ç‰‡é•¿åº¦
// å®¹é‡: k - i	 cap(s)	capå‡½æ•°è¿”å›åˆ‡ç‰‡å®¹é‡ 


// åˆ‡ç‰‡æ˜¯å¼•ç”¨ç±»å‹
// å¯¹åˆ‡ç‰‡ä¸­çš„å…ƒç´ çš„ä¿®æ”¹ï¼Œä¹Ÿä¼šå¯¹å…¶åº•å±‚æ•°ç»„çš„å…ƒç´ ä¿®æ”¹

slice := []int{10, 20, 30, 40, 50} // å£°æ˜ä¸€ä¸ªåŸå§‹åˆ‡ç‰‡  [10 20 30 40 50]
fmt.Println(slice)                 // æ‰“å°åŸå§‹åˆ‡ç‰‡1     [10 20 30 40 50]
newSlice1 := slice[1:3]            // æ–°åˆ‡ç‰‡1 [20 30]
fmt.Println(newSlice1)             // æ‰“å°æ–°åˆ‡ç‰‡1  [20 30]
newSlice1[0] = 90                  // ä¿®æ”¹æ–°åˆ‡ç‰‡1çš„ç¬¬0ä¸ªå…ƒç´   20-> 90	, ä¹Ÿä¼šå¯¹åŸå§‹åˆ‡ç‰‡çš„å…ƒç´ ä¿®æ”¹   [10 20 30 40 50]
newSlice2 := slice                 // å°†åŸå§‹åˆ‡ç‰‡èµ‹å€¼ç»™ä¸€ä¸ªæ–°åˆ‡ç‰‡2
fmt.Println(newSlice1)             // æ–°åˆ‡ç‰‡1 [90 30]   
fmt.Println(newSlice2)			   // æ–°åˆ‡ç‰‡2      [10 90 30 40 50]      	


// åˆ‡ç‰‡çš„ append 
// ä¸æ•°ç»„ä¸åŒï¼Œå¯åŠ¨æ€å¢å‡å…ƒç´ æ˜¯æ•°ç»„åˆ‡ç‰‡æ¯”æ•°ç»„æ›´ä¸ºå¼ºå¤§çš„åŠŸèƒ½

// appen()å‡½æ•°æ˜¯builtin.goä¸­å®šä¹‰çš„ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒçš„å®šä¹‰å¦‚ä¸‹ï¼šfunc append(slice []Type, elems ...Type) []Type
// append(è¢«æ“ä½œçš„åˆ‡ç‰‡,è¦è¢«å¢åŠ çš„å…ƒç´ ... ) ï¼ŒæŒ‰ç…§ append è¯­ä¹‰ï¼Œç¬¬äºŒä¸ªå‚æ•°å…¶å®æ˜¯ä¸€ä¸ªä¸å®šé•¿å‚æ•°ã€‚å¯ä»¥æ ¹æ®éœ€æ±‚æ·»åŠ nä¸ªå…ƒç´ 
slice := []int{10, 20, 30, 40, 50}  //  [10 20 30 40 50]
newSlice := slice[1:3] // [20 30]
newSlice = append(newSlice, 60)  // [20 30 60]
// ç”±äºå’ŒåŸå§‹çš„ slice å…±äº«åŒä¸€ä¸ªåº•å±‚æ•°ç»„ï¼Œslice ä¸­ç´¢å¼•ä¸º 3 çš„å…ƒç´ çš„å€¼ä¹Ÿè¢«æ”¹åŠ¨äº†ã€‚[10 20 60 40 50]

// åˆ‡ç‰‡æ·»åŠ å…ƒç´ æ—¶ï¼Œç¬¬äºŒä¸ªå…ƒç´ ä¹Ÿå¯ä»¥æ˜¯åˆ‡ç‰‡ï¼Œè¦æ³¨æ„åŠ ä¸Š ... ï¼ˆç›¸å½“äºæŠŠç¬¬äºŒä¸ªåˆ‡ç‰‡æ‰“æ•£ä¼ å…¥ï¼‰
mySlice = append(mySlice, mySlice2...)


// å¦‚æœåˆ‡ç‰‡çš„åº•å±‚æ•°ç»„æ²¡æœ‰è¶³å¤Ÿçš„å¯ç”¨å®¹é‡ï¼Œappend å‡½æ•°ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„åº•å±‚æ•°ç»„ï¼Œå°†è¢«å¼•ç”¨çš„ç°æœ‰çš„å€¼å¤åˆ¶åˆ°æ–°æ•°ç»„é‡Œ
// å½“è¿™ä¸ª append æ“ä½œå®Œæˆåï¼ŒnewSlice æ‹¥æœ‰ä¸€ä¸ªå…¨æ–°çš„åº•å±‚æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„çš„å®¹é‡æ˜¯åŸæ¥çš„ä¸¤å€
// å‡½æ•° append ä¼šæ™ºèƒ½åœ°å¤„ç†åº•å±‚æ•°ç»„çš„å®¹é‡å¢é•¿ã€‚åœ¨åˆ‡ç‰‡çš„å®¹é‡å°äº 1000 ä¸ªå…ƒç´ æ—¶ï¼Œæ€»æ˜¯ä¼šæˆå€åœ°å¢åŠ å®¹é‡
// ä¸€æ—¦å…ƒç´ ä¸ªæ•°è¶…è¿‡ 1000ï¼Œå®¹é‡çš„å¢é•¿å› å­ä¼šè®¾ä¸º 1.25ï¼Œä¹Ÿå°±æ˜¯ä¼šæ¯æ¬¡å¢åŠ  25% çš„å®¹é‡


// ä¸ºäº†ä¿æŒåŸæœ‰åˆ‡ç‰‡çš„åº•å±‚æ•°ç»„ä¸è¢«æ”¹å˜ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªé•¿åº¦å’Œå®¹é‡ç›¸åŒçš„åˆ‡ç‰‡ï¼Œè¿™æ—¶å€™å†appendï¼Œå°±å¯ä»¥å¼ºåˆ¶è®©æ–°åˆ‡ç‰‡çš„ç¬¬ä¸€ä¸ª append æ“ä½œåˆ›å»ºæ–°çš„åº•å±‚æ•°ç»„ï¼Œä¸åŸæœ‰çš„åº•å±‚æ•°ç»„åˆ†ç¦»ã€‚
// æ–°åˆ‡ç‰‡ä¸åŸæœ‰çš„åº•å±‚æ•°ç»„åˆ†ç¦»åï¼Œå¯ä»¥å®‰å…¨åœ°è¿›è¡Œåç»­ä¿®æ”¹
source := []string{"Apple", "Orange", "Plum", "Banana", "Grape"}  //å­—ç¬¦ä¸²åˆ‡ç‰‡
slice := source[2:3:3]     //å¯¹ç¬¬ä¸‰ä¸ªå…ƒç´ åˆ‡ç‰‡ï¼Œé•¿åº¦å’Œå®¹é‡éƒ½æ˜¯1 ï¼Œ[Plum]
slice = append(slice, "Kiwi")   // å¯¹æ–°åˆ‡ç‰‡è¿½åŠ å­—ç¬¦ä¸²
// ç”±äºæ–°åˆ‡ç‰‡é•¿åº¦å’Œå®¹é‡éƒ½æ˜¯1ï¼Œappendçš„æ—¶å€™ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„åº•å±‚æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„åŒ…æ‹¬ 2 ä¸ªå…ƒç´ ï¼Œå¹¶å°†æ°´æœ Plum å¤åˆ¶è¿›æ¥ï¼Œå†è¿½åŠ æ–°æ°´æœ Kiwiï¼Œå¹¶è¿”å›ä¸€ä¸ªå¼•ç”¨äº†è¿™ä¸ªåº•å±‚æ•°ç»„çš„æ–°åˆ‡ç‰‡
// è¿™æ ·å°±ä¸ä¼šå¯¹åŸå§‹åˆ‡ç‰‡é€ æˆä¿®æ”¹




// åˆ‡ç‰‡å†…å®¹å¤åˆ¶




// åˆ‡ç‰‡çš„è¿­ä»£

// åˆ‡ç‰‡çš„è¿­ä»£ï¼Œè¿”å›ä¸¤ä¸ªå€¼ï¼Œç¬¬ä¸€ä¸ªå€¼æ˜¯å½“å‰è¿­ä»£åˆ°çš„ç´¢å¼•ä½ç½®ï¼Œç¬¬äºŒä¸ªå€¼æ˜¯è¯¥ä½ç½®å¯¹åº”å…ƒç´ å€¼çš„ä¸€ä»½å‰¯æœ¬ã€‚

slice := []int{10, 20, 30, 40}

for index, value := range slice {
	fmt.Printf("\n")
	// è¿­ä»£æ¯ä¸ªå…ƒç´ 
	// ç´¢å¼•ä½ç½®ï¼Œå€¼ï¼Œå€¼åœ°å€ï¼Œå…ƒç´ åœ°å€
	// å› ä¸ºè¿­ä»£è¿”å›çš„å˜é‡æ˜¯ä¸€ä¸ªè¿­ä»£è¿‡ç¨‹ä¸­æ ¹æ®åˆ‡ç‰‡ä¾æ¬¡èµ‹å€¼çš„æ–°å˜é‡ï¼Œæ‰€ä»¥ value çš„åœ°å€æ€»æ˜¯ç›¸åŒçš„ã€‚
    // è¦æƒ³è·å–æ¯ä¸ªå…ƒç´ çš„åœ°å€ï¼Œå¯ä»¥ä½¿ç”¨åˆ‡ç‰‡å˜é‡å’Œç´¢å¼•å€¼ã€‚(&slice[index])
	fmt.Printf("index : %d , Value : %d , Value-Addr : %X  , ElemAddr: %X\n ", index, value, &value, &slice[index])
}


slice := []string {"apple", "green" , "yellow" , "pink"}

// åœ¨è¿­ä»£ä¸­åªè·å–å…ƒç´ å€¼
for _ , value := range slice{
	fmt.Printf("Value is %s\n",value)
}

// ä»ç¬¬ n ä¸ªå…ƒç´ å¼€å§‹è¿­ä»£
for index := 2; index < len(slice) ; index++ {
	fmt.Printf("The Index %d of the Value is %s\n",index ,slice[index])
}



// å¤šç»´åˆ‡ç‰‡

// å’Œæ•°ç»„ä¸€æ ·ï¼Œgoä¹Ÿæ”¯æŒå¤šç»´åˆ‡ç‰‡ï¼Œç»„åˆå¤šä¸ªåˆ‡ç‰‡ä¸ºä¸€ä¸ªåˆ‡ç‰‡ã€‚
// æ•´å‹åˆ‡ç‰‡çš„åˆ‡ç‰‡ 
//  å¤–å±‚çš„åˆ‡ç‰‡åŒ…æ‹¬ä¸¤ä¸ªå…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªåˆ‡ç‰‡ã€‚ç¬¬ä¸€ä¸ªå…ƒç´ ä¸­çš„åˆ‡ç‰‡ä½¿ç”¨å•ä¸ªæ•´æ•° 10 æ¥åˆå§‹åŒ–ï¼Œç¬¬äºŒä¸ªå…ƒç´ ä¸­çš„åˆ‡ç‰‡åŒ…æ‹¬ä¸¤ä¸ªæ•´æ•°ï¼Œå³ 100 å’Œ 200ã€‚
slice := [][]int{{10}, {100, 200}}


```



### map

åœ¨C++/Javaä¸­ï¼Œ map ä¸€èˆ¬éƒ½ä»¥åº“çš„æ–¹å¼æä¾›ï¼Œæ¯”å¦‚åœ¨C++ä¸­æ˜¯STLçš„ std::map<> ï¼Œåœ¨C#ä¸­æ˜¯ Dictionary<> ï¼Œåœ¨Javaä¸­æ˜¯ Hashmap<> ï¼Œåœ¨è¿™äº›è¯­è¨€ä¸­ï¼Œå¦‚æœè¦ä½¿ç”¨ map ï¼Œäº‹å…ˆè¦å¼•ç”¨ç›¸åº”çš„åº“ã€‚

åœ¨Goä¸­ï¼Œä½¿ç”¨ map ä¸éœ€è¦å¼•å…¥ä»»ä½•åº“ï¼Œå¹¶ä¸”ç”¨èµ·æ¥ä¹Ÿæ›´åŠ æ–¹ä¾¿ã€‚

**map æ˜¯ä¸€ç³»åˆ—æ— åºçš„é”®å€¼å¯¹é›†åˆã€‚map æ˜¯ä¸€ä¸ªé›†åˆï¼Œå¯ä»¥ç”¨ç±»ä¼¼æ•°ç»„å’Œåˆ‡ç‰‡çš„æ–¹å¼æ¥è¿­ä»£mapä¸­çš„å…ƒç´ ã€‚**

**ä½† map æ˜¯æ— åºçš„é›†åˆï¼Œæ„å‘³ç€æ²¡æœ‰åŠæ³•é¢„æµ‹é”®å€¼å¯¹è¢«è¿”å›çš„é¡ºåºã€‚å³ä¾¿ä½¿ç”¨åŒæ ·çš„é¡ºåºä¿å­˜é”®å€¼å¯¹ï¼Œæ¯æ¬¡è¿­ä»£æ˜ å°„çš„æ—¶å€™é¡ºåºä¹Ÿå¯èƒ½ä¸ä¸€æ ·ã€‚**

**æ— åºçš„åŸå› æ˜¯ map çš„å®ç°ä½¿ç”¨äº†æ•£åˆ—è¡¨è¿™ç§æ•°æ®ç»“æ„ï¼ˆåˆå«å“ˆå¸Œè¡¨ï¼‰ã€‚**



#### map å†…éƒ¨å®ç°

åœ¨å‘ map ä¸­å­˜å‚¨å…ƒç´ çš„æ—¶å€™ï¼Œä¼šå°†æ¯ä¸ª key ç»è¿‡ hash è¿ç®—ï¼Œæ ¹æ®è¿ç®—å¾—åˆ°çš„ hash å€¼é€‰æ‹©åˆé€‚çš„ hash bucket(hashæ¡¶)ï¼Œè®©åå°†å„ä¸ª key/value å­˜æ”¾åˆ°é€‰å®šçš„hash bucket ä¸­ã€‚å¦‚æœä¸€æ¥ï¼Œæ•´ä¸ªmapå°†æ ¹æ®bucketè¢«ç»†åˆ†æˆå¾ˆå¤šç±»åˆ«ï¼Œæ¯ä¸ªkeyå¯èƒ½ä¼šäº¤å‰åœ°å­˜æ”¾åˆ°ä¸åŒçš„bucketä¸­ã€‚



åœ¨ /usr/local/go/src/runtime/hashmap.go ä¸­å¯ä»¥æŸ¥çœ‹å®ƒçš„å®ç°ç»†èŠ‚ã€‚



> referer 
>
> http://yangxikun.github.io/golang/2019/10/07/golang-map.html
>
> https://draveness.me/golang/docs/part2-foundation/ch03-datastructure/golang-hashmap/



```go
// mapçš„è¯­æ³• map[key_type] value_type
// key_typeï¼šé”®ç±»å‹å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œè¿™ä¸ªå€¼çš„ç±»å‹å¯ä»¥æ˜¯å†…ç½®çš„ç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯ç»“æ„ç±»å‹ï¼Œåªè¦è¿™ä¸ªå€¼å¯ä»¥ä½¿ç”¨==è¿ç®—ç¬¦åšæ¯”è¾ƒã€‚
// åˆ‡ç‰‡ã€å‡½æ•°ä»¥åŠåŒ…å«åˆ‡ç‰‡çš„ç»“æ„ç±»å‹è¿™äº›ç±»å‹ç”±äºå…·æœ‰å¼•ç”¨è¯­ä¹‰ï¼Œä¸èƒ½ä½œä¸ºæ˜ å°„çš„é”®ï¼Œä½¿ç”¨è¿™äº›ç±»å‹ä¼šé€ æˆç¼–è¯‘é”™è¯¯
// value_type: å€¼ç±»å‹å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œmap[int] []string{} // ä½¿ç”¨å­—ç¬¦ä¸²åˆ‡ç‰‡åšä¸ºmapçš„å€¼ç±»å‹


////////////////////////////////////////////// mapå£°æ˜ //////////////////////////////////////////////////////////

// nilmap: æœªè¢«åˆå§‹åŒ–çš„mapéƒ½ç§°ä¸º nil map ã€‚æ— æ³•è¿›è¡Œèµ‹å€¼ï¼Œå› ä¸ºæ²¡æœ‰ç”³è¯·åº•å±‚æ•°æ®ç»“æ„çš„å†…å­˜ç©ºé—´
// å£°æ˜ä¸€ä¸ªmapç±»å‹çš„å˜é‡ï¼ˆé”®string,å€¼stringï¼‰
var myMap map[string]  string 


// ç©ºmap: ä¸åšä»»ä½•èµ‹å€¼çš„mapï¼Œå·²ç»ç”³è¯·äº†åº•å±‚æ•°æ®ç»“æ„çš„å†…å­˜ç©ºé—´
my_map := map[string]string{}

// nil mapå’Œempty mapçš„å…³ç³»ï¼Œå°±åƒnil sliceå’Œempty sliceä¸€æ ·ï¼Œä¸¤è€…éƒ½æ˜¯ç©ºå¯¹è±¡ï¼Œæœªå­˜å‚¨ä»»ä½•æ•°æ®ã€‚
// ä½†å‰è€…ä¸æŒ‡å‘åº•å±‚æ•°æ®ç»“æ„ï¼Œåè€…æŒ‡å‘åº•å±‚æ•°æ®ç»“æ„ï¼Œåªä¸è¿‡æŒ‡å‘çš„åº•å±‚å¯¹è±¡æ˜¯ç©ºå¯¹è±¡ã€‚


package main

func main() {
	var nil_map map[string]string
	println(nil_map)

	emp_map := map[string]string{}
	println(emp_map)
}

// è¾“å‡ºå¦‚ä¸‹ï¼šæ˜¾ç„¶ï¼Œmapæ˜¯æŒ‡é’ˆ
0x0
0xc000042610



// ä½¿ç”¨makeå‡½æ•°å£°æ˜ä¸€ä¸ªmap(keyçš„ç±»å‹æ˜¯ stringï¼Œvalueçš„ç±»å‹æ˜¯ int)
dict := make(map[string]int)
// å£°æ˜ä¸€ä¸ªmap(keyçš„ç±»å‹æ˜¯ stringï¼Œvalueçš„ç±»å‹æ˜¯ string)
dict := make(map[string]string)
// å£°æ˜ä¸€ä¸ªmap(keyçš„ç±»å‹æ˜¯ stringï¼Œvalueçš„ç±»å‹æ˜¯å­—ç¬¦ä¸²åˆ‡ç‰‡)
dict := make(map[string] []string)



// ä½¿ç”¨mapå­—é¢é‡å£°æ˜å¹¶åˆå§‹åŒ–mapï¼Œmapçš„é•¿åº¦ç”±é”®å€¼å¯¹çš„æ•°é‡å†³å®š
dict := map[string]string{
	"Red":    "#da1337",
	"Orange": "#e95a22",
}


// å£°æ˜ä¸€ä¸ªå­˜å‚¨èƒ½åŠ›ä¸º100çš„mapï¼Œåœ¨å°½å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ make() åˆå§‹åŒ–çš„æ—¶å€™æä¾›å®¹é‡ä¿¡æ¯
// makeå‡½æ•°å…¶å®æ˜¯æ„é€ äº†å­—é¢é‡
myMap = make(map[string] string, 100)


// åˆ›å»ºä¸€ä¸ªç©ºmap
colors := map[string]string{}
// ä¸ºmapæ·»åŠ å…ƒç´ 
colors["Red"] = "#da1337"

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////



// æŸ¥æ‰¾map

// æŸ¥æ‰¾mapä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªé”®ï¼Œè¿™æ˜¯mapçš„æœ€åŸºæœ¬çš„æ“ä½œã€‚

// åœ¨goä¸­ï¼Œmap["key"]è¿”å›ä¸¤ä¸ªå€¼ï¼švalueè¡¨ç¤ºè¿™ä¸ªkeyå¯¹åº”çš„valueï¼Œexits(å¸ƒå°”ç±»å‹)è¡¨ç¤ºkeyæ˜¯å¦å­˜åœ¨

// åœ¨goä¸­ï¼Œé€šè¿‡é”®æ¥ç´¢å¼•æ˜ å°„æ—¶ï¼Œå³ä¾¿è¿™ä¸ªé”®ä¸å­˜åœ¨ï¼Œvalueä¹Ÿæ€»ä¼šè¿”å›ä¸€ä¸ªå€¼ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿”å›çš„æ˜¯è¯¥å€¼å¯¹åº”çš„ç±»å‹çš„é›¶å€¼ã€‚

// åˆ¤æ–­mapä¸­æ˜¯å¦èƒ½æˆåŠŸå–åˆ°ç‰¹å®šçš„é”®ï¼Œä¸éœ€è¦æ£€æŸ¥å–åˆ°çš„å€¼æ˜¯å¦ä¸º nil ï¼Œåªéœ€çœ‹ç¬¬äºŒä¸ªè¿”å›å€¼ ok

value , exists := colors["Blue"]
// è¿™ä¸ªé”®å­˜åœ¨å—ï¼Ÿ
if exists {
	fmt.Println(value)
    // balabala
}


// è¿­ä»£map

// ä¸åˆ‡ç‰‡å’Œæ•°ç»„ä¸€æ ·ï¼Œåªä¸è¿‡ range è¿”å›çš„ä¸æ˜¯ç´¢å¼•å’Œå€¼ï¼Œè€Œæ˜¯é”®å€¼å¯¹ã€‚

colors := map[string]string{
	"AliceBlue": "#f0f8ff",
	"Coral": "#ff7F50",
	"DarkGray": "#a9a9a9",
	"ForestGreen": "#228b22",
}
// å¦‚æœåªéœ€è¦keyæˆ–valueã€‚å°±å¯ä»¥ç”¨ä¸‹åˆ’çº¿æ¥å£°æ˜å˜é‡
for key, value := range colors {
		fmt.Printf("Key: %s Value: %s\n", key, value)
}


// åˆ é™¤å…ƒç´ 

// ä»colorsè¿™ä¸ªmapä¸­åˆ é™¤é”®ä¸º Coral çš„é”®å€¼å¯¹
delete(colors, "Coral")


// å…ƒç´ ä¸ªæ•°
// ç»Ÿè®¡mapä¸­çš„å…ƒç´ ä¸ªæ•°
len(colors)
```





## å‡½æ•°

å‡½æ•°æ„æˆä»£ç æ‰§è¡Œçš„é€»è¾‘ç»“æ„ï¼Œåœ¨ Go è¯­è¨€ä¸­ï¼Œå‡½æ•°çš„åŸºæœ¬ç»„æˆä¸ºï¼šå…³é”®å­— func ã€å‡½æ•°åã€å‚æ•°åˆ—è¡¨ã€è¿”å›å€¼ã€å‡½æ•°ä½“å’Œè¿”å›è¯­å¥ã€‚

main å‡½æ•°æ—¢æ²¡æœ‰å‚æ•°ï¼Œä¹Ÿæ²¡æœ‰è¿”å›ç±»å‹ï¼ˆä¸ C å®¶æ—ä¸­çš„å…¶å®ƒè¯­è¨€æ°å¥½ç›¸åï¼‰ã€‚

åœ¨ç¨‹åºå¼€å§‹æ‰§è¡Œå¹¶å®Œæˆåˆå§‹åŒ–åï¼Œç¬¬ä¸€ä¸ªè°ƒç”¨ï¼ˆç¨‹åºçš„å…¥å£ç‚¹ï¼‰çš„å‡½æ•°æ˜¯ `main.main()`ï¼ˆå¦‚ï¼šC è¯­è¨€ï¼‰ï¼Œè¯¥å‡½æ•°ä¸€æ—¦è¿”å›å°±è¡¨ç¤ºç¨‹åºå·²æˆåŠŸæ‰§è¡Œå¹¶ç«‹å³é€€å‡ºã€‚

å‡½æ•°é‡Œçš„ä»£ç ï¼ˆå‡½æ•°ä½“ï¼‰ä½¿ç”¨å¤§æ‹¬å· `{}` æ‹¬èµ·æ¥ã€‚

å·¦å¤§æ‹¬å· `{` å¿…é¡»ä¸æ–¹æ³•çš„å£°æ˜æ”¾åœ¨åŒä¸€è¡Œï¼Œè¿™æ˜¯ç¼–è¯‘å™¨çš„å¼ºåˆ¶è§„å®šï¼Œå¦åˆ™ä½ åœ¨ä½¿ç”¨ gofmt æ—¶å°±ä¼šå‡ºç°é”™è¯¯æç¤ºï¼š

```go
`build-error: syntax error: unexpected semicolon or newline before {`
```

ï¼ˆè¿™æ˜¯å› ä¸ºç¼–è¯‘å™¨ä¼šäº§ç”Ÿ `func main() ;` è¿™æ ·çš„ç»“æœï¼Œå¾ˆæ˜æ˜¾è¿™é”™è¯¯çš„ï¼‰

**Go è¯­è¨€è™½ç„¶çœ‹èµ·æ¥ä¸ä½¿ç”¨åˆ†å·ä½œä¸ºè¯­å¥çš„ç»“æŸï¼Œä½†å®é™…ä¸Šè¿™ä¸€è¿‡ç¨‹æ˜¯ç”±ç¼–è¯‘å™¨è‡ªåŠ¨å®Œæˆï¼Œå› æ­¤æ‰ä¼šå¼•å‘åƒä¸Šé¢è¿™æ ·çš„é”™è¯¯**

å³å¤§æ‹¬å· `}` éœ€è¦è¢«æ”¾åœ¨ç´§æ¥ç€å‡½æ•°ä½“çš„ä¸‹ä¸€è¡Œã€‚å¦‚æœä½ çš„å‡½æ•°éå¸¸ç®€çŸ­ï¼Œä½ ä¹Ÿå¯ä»¥å°†å®ƒä»¬æ”¾åœ¨åŒä¸€è¡Œï¼š

```go
func Sum(a, b int) int { return a + b }
```



### å‡½æ•°ç»“æ„

```go
// func å‡½æ•°åï¼ˆï¼‰ï¼Œå‚æ•°åˆ—è¡¨ï¼Œè¿”å›å€¼åˆ—è¡¨ï¼Œå‡½æ•°ä½“ï¼Œå‡½æ•°è¯­å¥


func functionName(parameter_list) (return_value_list) {
   â€¦
}

// å‡½æ•°å…¥å‚ï¼šparameter_list çš„å½¢å¼ä¸º (param1 type1, param2 type2, â€¦)

// ç”±äºgolangæ”¯æŒå¤šé‡è¿”å›
// return_value_list çš„å½¢å¼ä¸º (ret1 type1, ret2 type2, â€¦)

// åªæœ‰å½“æŸä¸ªå‡½æ•°éœ€è¦è¢«å¤–éƒ¨åŒ…è°ƒç”¨çš„æ—¶å€™æ‰ä½¿ç”¨å¤§å†™å­—æ¯å¼€å¤´ï¼Œå¹¶éµå¾ª Pascal å‘½åæ³•ï¼›
// å¦åˆ™å°±éµå¾ªéª†é©¼å‘½åæ³•ï¼Œå³ç¬¬ä¸€ä¸ªå•è¯çš„é¦–å­—æ¯å°å†™ï¼Œå…¶ä½™å•è¯çš„é¦–å­—æ¯å¤§å†™ã€‚



func Add(a int, b int) (ret int, err error) {
	if a < 0 || b < 0 { 
		err= errors.New("Should be non-negative numbers!")
	return
	}
	return a + b, nil   // æ”¯æŒå¤šé‡è¿”å›
}

// å½“æœ‰å¤šé‡è¿”å›çš„æ—¶å€™ï¼Œåœ¨è¿”å›å‚æ•°åˆ—è¡¨ä¸­ï¼Œå¯ä»¥ä¸ºè¿”å›å‚æ•°å‘½åï¼Œè®©ä»£ç æ›´åŠ æ¸…æ´—
// Goè¯­è¨€å¹¶ä¸éœ€è¦å¼ºåˆ¶å‘½åè¿”å›å€¼ï¼Œä½†æ˜¯å‘½ååçš„è¿”å›å€¼å¯ä»¥è®©ä»£ç æ›´æ¸…æ™°ï¼Œå¯è¯»æ€§æ›´å¼ºï¼Œ


// è°ƒç”¨å¤šé‡è¿”å›å‡½æ•°æ—¶ï¼Œå¯ä»¥å¿½ç•¥æŸä¸ªè¿”å›å€¼
n, _ := f.Read(buf)


// å¦‚æœå‚æ•°åˆ—è¡¨ï¼Œè¿”å›å€¼åˆ—è¡¨ä¸­çš„å¤šä¸ªå‚æ•°çš„æ•°æ®ç±»å‹ç›¸åŒï¼Œå¯ä»¥åˆå¹¶
func Add(a ,b int) (ret , num int, err error){
    
}



// ä¸å®šå‚æ•°ï¼Œå‡½æ•°ä¼ å…¥çš„å‚æ•°æ•°é‡æ˜¯ä¸ç¡®å®šçš„
// ... type è¿™ç§æ ¼å¼åªèƒ½å­˜åœ¨äºå‡½æ•°å‚æ•°ä¸­ï¼Œå¹¶ä¸”æ˜¯æœ€åä¸€ä¸ªå‚æ•°
// ç±»å‹ ...type æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ•°ç»„åˆ‡ç‰‡
func myfunc(args ...int){
    for _, arg := range args {
		fmt.Println(arg)
	}
}


// ä»»æ„ç±»å‹çš„ä¸å®šå‚æ•°ï¼ŒæŒ‡å®šç±»å‹ä¸º interface{}
// ä¸‹é¢æ˜¯ Go æ ‡å‡†åº“ä¸­çš„fmt.Printf()çš„å‡½æ•°åŸå‹
// ç”¨ interface{} ä¼ é€’ä»»æ„ç±»å‹æ•°æ®æ˜¯Goè¯­è¨€çš„?ä¾‹ç”¨æ³•
func Printf(format string, args ...interface{}) {
	// ...
}
```



### åŒ¿åå‡½æ•°

åŒ¿åå‡½æ•°ç”±ä¸€ä¸ªä¸å¸¦å‡½æ•°åçš„å‡½æ•°å£°æ˜å’Œå‡½æ•°ä½“ç»„æˆï¼Œå¯ä»¥å°†å‡½æ•°èµ‹å€¼ç»™å˜é‡

```go
package main

import (
	"fmt"
)

func main() {
    // å£°æ˜ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶å°†å‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡f
	f := func() {
		fmt.Println("hello world")
	}
	f()                   //hello world
    // æ‰“å°å˜é‡çš„æ•°æ®ç±»å‹
	fmt.Printf("%T\n", f) //æ‰“å° func()
}



// output:
// hello world
// func() 
```



```go
package main

import (
   "fmt"
)

func main() {
    // å£°æ˜åŒ¿åå‡½æ•°å¹¶èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œç”¨å˜é‡åçš„æ–¹å¼å»è°ƒç”¨ 
   f:=func(args string){
      fmt.Println(args)
   }
   f("hello world")//hello world
   
   // ç›´æ¥å°†å‡½æ•°å£°æ˜ä½“æ‹¬èµ·æ¥åšä¸ºå‡½æ•°åï¼Œåè·Ÿæ‹¬å·æ¥è°ƒç”¨å‡½æ•°
   (func(args string){
        fmt.Println(args)
    })("hello world")//hello world
    
    // ä¸ç”¨æ‹¬å·ï¼Œç›´æ¥è°ƒç”¨
    func(args string) {
        fmt.Println(args)
    }("hello world") //hello world

```

```go
package main

import (
    "fmt"
)

func main() {
	a := 1
	b := 2
	c := 3
	
    // å‡½æ•°è¿”å›å€¼èµ‹ç»™ä¸¤ä¸ªå˜é‡
    r, d := plus(a, b, c)
    fmt.Printf("%T\n", d)
    // è°ƒç”¨åŒ¿åå‡½æ•°
    d()
	fmt.Println(r)

}

// è¿™ä¸ªå‡½æ•°è¿”å›ä¸¤ä¸ªå˜é‡ï¼šç¬¬ä¸€ä¸ªæ˜¯intç±»å‹çš„ï¼Œç¬¬äºŒä¸ªæ˜¯åŒ¿åå‡½æ•°
func plus(x, y , z int) (name int, fun func()) {
	sum1 := x + y + z
	f := func() {
		fmt.Println("hello world")
	}
    return sum1, f

}


//output

hello world
6

```







```go
package main

import (
	"fmt"
)

func main() {
   f1,f2:=F(1,2)
   fmt.Println(f1(4))//6
   fmt.Println(f2()) //6
}
// å£°æ˜ä¸€ä¸ªå‡½æ•°ï¼Œå‚æ•°æ˜¯ä¸¤ä¸ªintï¼Œè¿”å›å€¼æ˜¯ä¸¤ä¸ªå‡½æ•°ï¼ˆå‡½æ•°å†…éƒ¨å£°æ˜ä¸¤ä¸ªåŒ¿åå‡½æ•°å¹¶èµ‹ç»™å˜é‡ï¼‰
func F(x, y int)(func(int)int,func()int) {
   
   // è°ƒç”¨ f1 çš„æ—¶å€™å¯ä»¥ä¼  int ç±»å‹çš„å‚æ•°ï¼Œè¿”å›intç±»å‹çš„æ•°æ® 
   f1 := func(z int) int {
      return (x + y) * z / 2
   }

   //è°ƒç”¨ f2 çš„æ—¶å€™æ²¡æœ‰å…¥å‚ï¼Œè¿”å›intç±»å‹çš„æ•°æ®  
   f2 := func() int {
      return 2 * (x + y)
   }
   return f1,f2
}
```



### é—­åŒ…

é—­åŒ…ï¼šè¯´ç™½äº†å°±æ˜¯å‡½æ•°çš„åµŒå¥—ï¼Œå†…å±‚çš„å‡½æ•°å¯ä»¥ä½¿ç”¨å¤–å±‚å‡½æ•°çš„æ‰€æœ‰å˜é‡ï¼Œå³ä½¿å¤–å±‚å‡½æ•°å·²ç»æ‰§è¡Œå®Œæ¯•ã€‚

```go
package main

import "fmt"

func main() {

	// aæ˜¯ä¸€ä¸ªå‡½æ•°ç±»å‹çš„å˜é‡ï¼Œè¿™é‡Œé¢ä¹Ÿå­˜äº†ä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡xï¼Œæ¯æ¬¡è°ƒç”¨açš„æ—¶å€™ï¼Œéƒ½ä¼šåœ¨ x åé¢åŠ  hello
	a := Fun()
	b := a(" hello")
	c := a(" hello")
	d := a(" hello")
	fmt.Println(b) //world hello
	fmt.Println(c) //world hello hello
	fmt.Println(d) //world hello hello hello

}

// å£°æ˜ä¸€ä¸ªåä¸º Fun çš„å‡½æ•°, è¿™ä¸ªå‡½æ•°æœ‰ä¸€ä¸ªè¿”å›å€¼ï¼Œæ•°æ®ç±»å‹æ˜¯å‡½æ•°ç±»å‹ï¼Œè¿™ä¸ªå‡½æ•°ç±»å‹çš„å‚æ•°å’Œè¿”å›å€¼çš„ç±»å‹éƒ½æ˜¯string
func Fun() func(string) string {
	x := "world"
	return func(args string) string {
		x += args
		return x
	}
}





```



```go
package main

import "fmt"

func main() {
	a := 1
	b := 2
	c := 3

	r, h := plus(a, b, c)
	h()
	//fmt.Printf(plus(a, b, c))
	fmt.Println(r)
	h()

}

func plus(x, y int, z int) (name int, fun func()) {
	sum1 := x + y + z
	f := func() {
		fmt.Println("hello world")
	}
	f()
	return sum1, f

}

```







## é”™è¯¯å¤„ç†



go å¼•å…¥äº†ä¸€ä¸ªå…³äºé”™è¯¯å¤„ç†çš„æ ‡å‡†æ¨¡å¼ã€‚





## defer å…³é”®å­—

> refer 
>
> https://deepzz.com/post/how-to-use-defer-in-golang.html
>
> https://www.cyub.vip/2020/05/30/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3golang%E4%B8%AD%E7%9A%84defer%E5%85%B3%E9%94%AE%E5%AD%97/





golang ä¸­çš„ defer å…³é”®å­—ç”¨æ¥å£°æ˜ä¸€ä¸ªå»¶è¿Ÿå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šæ”¾åœ¨ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œåœ¨ defer è¯­å¥çš„å¤–å±‚å‡½æ•°è¿”å›ä¹‹å‰ç³»ç»Ÿä¼šæ‰§è¡Œè¯¥å»¶è¿Ÿå‡½æ•°ã€‚



## ç»“æ„ä½“

Go è¯­è¨€æ˜¯ä¸€ç§é™æ€ç±»å‹çš„ç¼–ç¨‹è¯­è¨€ã€‚è¿™æ„å‘³ç€ï¼Œç¼–è¯‘å™¨éœ€è¦åœ¨ç¼–è¯‘æ—¶çŸ¥æ™“ç¨‹åºé‡Œæ¯ä¸ªå˜é‡å€¼çš„ç±»å‹ã€‚

**å€¼çš„ç±»å‹**ç»™ç¼–è¯‘å™¨æä¾›ä¸¤éƒ¨åˆ†ä¿¡æ¯ï¼šç¬¬ä¸€éƒ¨åˆ†ï¼Œéœ€è¦åˆ†é…å¤šå°‘å†…å­˜ç»™è¿™ä¸ªå€¼ï¼ˆå³å€¼çš„è§„æ¨¡ï¼‰ï¼›ç¬¬äºŒéƒ¨åˆ†ï¼Œè¿™æ®µå†…å­˜è¡¨ç¤ºä»€ä¹ˆã€‚

å¯¹äºè®¸å¤šå†…ç½®ç±»å‹çš„æƒ…å†µæ¥è¯´ï¼Œè§„æ¨¡å’Œè¡¨ç¤ºæ˜¯ç±»å‹åçš„ä¸€éƒ¨åˆ†ã€‚

- int64 ç±»å‹çš„å€¼éœ€è¦ 8 å­—èŠ‚ï¼ˆ64 ä½ï¼‰ï¼Œè¡¨ç¤ºä¸€ä¸ªæ•´æ•°å€¼ï¼›
- float32 ç±»å‹çš„å€¼éœ€è¦ 4 å­—èŠ‚ï¼ˆ32 ä½ï¼‰ï¼Œè¡¨ç¤ºä¸€ä¸ª IEEE-754 å®šä¹‰çš„äºŒè¿›åˆ¶æµ®ç‚¹æ•°ï¼›
- bool ç±»å‹çš„å€¼éœ€è¦ 1 å­—èŠ‚ï¼ˆ8 ä½ï¼‰ï¼Œè¡¨ç¤ºå¸ƒå°”å€¼ trueå’Œ falseã€‚



æœ‰äº›ç±»å‹çš„å†…éƒ¨è¡¨ç¤ºä¸ç¼–è¯‘ä»£ç çš„æœºå™¨çš„ä½“ç³»ç»“æ„æœ‰å…³ã€‚ä¾‹å¦‚ï¼Œæ ¹æ®ç¼–è¯‘æ‰€åœ¨çš„æœºå™¨çš„ä½“ç³»ç»“æ„ï¼Œä¸€ä¸ª int å€¼çš„å¤§å°å¯èƒ½æ˜¯ 8 å­—èŠ‚ï¼ˆ64 ä½ï¼‰ï¼Œä¹Ÿå¯èƒ½æ˜¯ 4 å­—èŠ‚ï¼ˆ32 ä½ï¼‰ã€‚

è¿˜æœ‰ä¸€äº›ä¸ä½“ç³»ç»“æ„ç›¸å…³çš„ç±»å‹ï¼Œå¦‚ Go è¯­è¨€é‡Œçš„æ‰€æœ‰å¼•ç”¨ç±»å‹ã€‚å¥½åœ¨åˆ›å»ºå’Œä½¿ç”¨è¿™äº›ç±»å‹çš„å€¼çš„æ—¶å€™ï¼Œä¸éœ€è¦äº†è§£è¿™äº›ä¸ä½“ç³»ç»“æ„ç›¸å…³çš„ä¿¡æ¯ã€‚

ä½†æ˜¯ï¼Œå¦‚æœç¼–è¯‘å™¨ä¸çŸ¥é“è¿™äº›ä¿¡æ¯ï¼Œå°±æ— æ³•é˜»æ­¢ç”¨æˆ·åšä¸€äº›å¯¼è‡´ç¨‹åºå—æŸç”šè‡³æœºå™¨æ•…éšœçš„äº‹æƒ…ã€‚



Go è¯­è¨€å…è®¸ç”¨æˆ·å®šä¹‰ç±»å‹ï¼Œå½“ç”¨æˆ·å£°æ˜ä¸€ä¸ªæ–°ç±»å‹æ—¶ï¼Œè¿™ä¸ªå£°æ˜å°±ç»™ç¼–è¯‘å™¨æä¾›äº†ä¸€ä¸ªæ¡†æ¶ï¼Œå‘ŠçŸ¥å¿…è¦çš„å†…å­˜å¤§å°å’Œè¡¨ç¤ºä¿¡æ¯ã€‚



```go
// userç±»å‹ï¼š åœ¨ç¨‹åºé‡Œå®šä¹‰ä¸€ä¸ªç»“æ„ä½“ï¼Œç»“æ„ä½“ç±»å‹é€šè¿‡ç»„åˆä¸€ç³»åˆ—å›ºå®šä¸”å”¯ä¸€çš„å­—æ®µæ¥å£°æ˜
// ç»“æ„ä½“é‡Œæ¯ä¸ªå­—æ®µéƒ½ä¼šç”¨ä¸€ä¸ªå·²çŸ¥ç±»å‹æ¥å£°æ˜ã€‚è¿™ä¸ªå·²çŸ¥ç±»å‹å¯ä»¥æ˜¯å†…ç½®ç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–ç”¨æˆ·å®šä¹‰çš„ç±»å‹
type user struct {
	name       string
	email      string
	ext        int
	privileged bool
}

// å£°æ˜userç±»å‹çš„å˜é‡ï¼Œå…¶å±æ€§éƒ½æ˜¯é›¶å€¼
var bill user

// ä»»ä½•æ—¶å€™ï¼Œåˆ›å»ºä¸€ä¸ªå˜é‡å¹¶åˆå§‹åŒ–ä¸ºå…¶é›¶å€¼ï¼Œä¹ æƒ¯æ˜¯ä½¿ç”¨å…³é”®å­— varã€‚è¿™ç§ç”¨æ³•æ˜¯ä¸ºäº†æ›´æ˜ç¡®åœ°è¡¨ç¤ºä¸€ä¸ªå˜é‡è¢«è®¾ç½®ä¸ºé›¶å€¼
// å¦‚æœå˜é‡è¢«åˆå§‹åŒ–ä¸ºæŸä¸ªéé›¶å€¼,å°±é…åˆç»“æ„å­—é¢é‡å’ŒçŸ­å˜é‡å£°æ˜æ“ä½œç¬¦æ¥åˆ›å»ºå˜é‡

// å£°æ˜userç±»å‹çš„å˜é‡ï¼Œç»“åˆå­—é¢é‡å’ŒçŸ­å£°æ˜è¡¨ç¤º
Lisa := User{
	name:       "Lisa",
	email:      "lisa@email.com",
	ext:        123,
	privileged: true,
}

// å£°æ˜ user ç±»å‹çš„å˜é‡ï¼Œè¿™ç§å½¢å¼ï¼Œå€¼çš„é¡ºåºå¿…é¡»å’Œç±»å‹å£°æ˜ä¸­çš„å­—æ®µé¡ºåºä¸€è‡´
lisa := user{"Lisa", "lisa@email.com", 123, true}



// å®šä¹‰ä¸€ä¸ªæ–°çš„ç»“æ„ä½“ç±»å‹ï¼Œè¿™ä¸ªç»“æ„ä½“é‡Œé¢åŒ…å«å…¶ä»–çš„è‡ªå®šä¹‰ç±»å‹
type admin struct {
    person  user
    level   string
}


// å…ˆå£°æ˜ä¸€ä¸ªuserç±»å‹çš„ç»“æ„ä½“å­—é¢é‡èµ‹ç»™personå­—æ®µï¼Œå†ç»„åˆpersonå’Œlevelä¸€èµ·ç»„åˆæˆadminçš„ç»“æ„ä½“å­—é¢é‡
tom :=  admin{
    person := user{
       	name:       "Lisa",
		email:      "lisa@email.com",
		ext:        123,
		privileged: true, 
    },
    level: "superuser"
}




```







### æ–¹æ³•

**æ–¹æ³•èƒ½ç»™ç”¨æˆ·å®šä¹‰çš„ç±»å‹æ·»åŠ æ–°çš„è¡Œä¸ºã€‚æ–¹æ³•å®é™…ä¸Šä¹Ÿæ˜¯å‡½æ•°ï¼Œåªæ˜¯åœ¨å£°æ˜æ—¶ï¼Œåœ¨å…³é”®å­— func å’Œæ–¹æ³•åä¹‹é—´å¢åŠ äº†ä¸€ä¸ªå‚æ•°**

å…³é”®å­— func å’Œå‡½æ•°åä¹‹é—´çš„å‚æ•°è¢«ç§°ä½œæ¥æ”¶è€…ï¼Œå°†å‡½æ•°ä¸æ¥æ”¶è€…çš„ç±»å‹ç»‘åœ¨ä¸€èµ·ã€‚å¦‚æœä¸€ä¸ªå‡½æ•°æœ‰æ¥æ”¶è€…ï¼Œè¿™ä¸ªå‡½æ•°å°±è¢«ç§°ä¸ºæ–¹æ³•ã€‚

```go

// å£°æ˜ä¸€ä¸ªç”¨æˆ·è‡ªå®šä¹‰ç±»å‹ï¼šuserç»“æ„ä½“
type user struct {
	name       string
	email      string
}


// å£°æ˜å€¼æ¥æ”¶è€…å£°æ˜çš„æ–¹æ³•
func (u user) notify() {
	fmt.Printf("Sending User Email To %s<%s>\n", u.name, u.email)
}

// userç±»å‹çš„å€¼å¯ä»¥è°ƒç”¨æ–¹æ³•
// è¿™ä¸ªè¯­æ³•ä¸è°ƒç”¨ä¸€ä¸ªåŒ…é‡Œçš„å‡½æ•°çœ‹èµ·æ¥å¾ˆç±»ä¼¼,ä½†åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œbill ä¸æ˜¯åŒ…åï¼Œè€Œæ˜¯å˜é‡åï¼Œ
// è¿™æ®µç¨‹åºåœ¨è°ƒç”¨ notify æ–¹æ³•æ—¶ï¼Œä½¿ç”¨ bill çš„å€¼ä½œä¸ºæ¥æ”¶è€…è¿›è¡Œè°ƒç”¨,æ–¹æ³• notify ä¼šæ¥æ”¶åˆ° bill çš„å€¼çš„ä¸€ä¸ªå‰¯æœ¬
bill := user{"Bill", "bill@email.com"}
bill.notify()

// ä¹Ÿå¯ä»¥ç”¨æŒ‡å‘ user ç±»å‹å€¼çš„æŒ‡é’ˆæ¥è°ƒç”¨è¿™ä¸ªå€¼æ¥æ”¶è€…æ–¹æ³•
// å¯ä»¥è®¤ä¸º go æŒ‡å‘äº† (*lisa).notify() è¿™ç§æ–¹å¼çš„è°ƒç”¨ï¼Œnotify æ“ä½œçš„æ˜¯ä¸€ä¸ªå‰¯æœ¬ï¼Œåªä¸è¿‡è¿™æ¬¡æ“ä½œçš„æ˜¯ä» lisa æŒ‡é’ˆæŒ‡å‘çš„å€¼çš„å‰¯æœ¬ã€‚
lisa := &user{"Lisa", "lisa@email.com"}
lisa.notify()






// å£°æ˜æŒ‡é’ˆæ¥æ”¶è€…æ–¹æ³•
func (u *user) changeEmail(email string) {
	u.email = email
}


// è¿™ä¸ªæ¥æ”¶è€…çš„ç±»å‹æ˜¯æŒ‡å‘ user ç±»å‹å€¼çš„æŒ‡é’ˆï¼Œè€Œä¸æ˜¯ user ç±»å‹çš„å€¼,è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šå…±äº«è°ƒç”¨æ–¹æ³•æ—¶æ¥æ”¶è€…æ‰€æŒ‡å‘çš„å€¼


```







#### å€¼æ¥æ”¶è€…



#### æŒ‡é’ˆæ¥æ”¶è€…







# go è¿ç®—ç¬¦

go è¯­è¨€ä¸­çš„ä½è¿ç®—éƒ½æ˜¯åœ¨äºŒè¿›åˆ¶ä¸Šè¿›è¡Œçš„ã€‚æ‰€ä»¥åœ¨ä½è¿ç®—ä¹‹å‰è¦å…ˆå°†æ•°è½¬æ¢æˆäºŒè¿›åˆ¶ã€‚

go ä¸­æœ‰ä¸€äº›ç‰¹æ®Šçš„è¿ç®—ç¬¦ï¼š

```shell
&      ä½è¿ç®— AND     
|      ä½è¿ç®— OR   
^      ä½è¿ç®— XOR
&^     ä½æ¸…ç©º (AND NOT)
<<     å·¦ç§»
>>     å³ç§»
```



æŒ‰ä½ä¸  &                ä¸¤ä¸ªæ•°éƒ½ä¸º1æ—¶ï¼Œç»“æœæ‰ä¸º1ï¼Œå¦åˆ™ä¸º0



æŒ‰ä½æˆ– |                   ä¸¤ä¸ªæ•°éƒ½ä¸º0æ—¶ï¼Œç»“æœæ‰ä¸º0ï¼Œå¦åˆ™ä¸º1



å¼‚æˆ–è¿ç®—  ^              ä¸¤ä¸ªæ•°ç›¸åŒåˆ™ä¸º0ï¼Œä¸åŒåˆ™ä¸º1 



^ å¦‚æœåšä¸ºäºŒå…ƒè¿ç®—ç¬¦çš„æ—¶å€™ï¼Œæ˜¯å¼‚æˆ–è¿ç®—ï¼Œ

































