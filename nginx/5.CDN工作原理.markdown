## CDN工作原理





加速域名：即您需要使用CDN加速的域名，也是您的客户访问时直接请求访问的域名。

- 可以自己在 CDN 厂商处随意添加，但是会验证域名所有权。
- 需要在域名注册商处添加 txt 记录进行验证。

- **CNAM域名**：
  - 在CDN服务商创建加速域名后，CDN厂商会分配一个CNAME域名。
  - 把 

- 源站地址：指您的业务服务器IP地址对应的域名。（源站可以是域名，也可以是IP）





假设您的加速域名为 `www.a.com`，接入CDN网络，开始使用加速服务后，当终端用户（北京）发起HTTP请求时，处理流程如下图所示。               

- 终端用户（北京）向`www.a.com`下的指定资源发起请求时，首先向LDNS（本地DNS）发起域名解析请求。                  

- LDNS检查缓存中是否有`www.a.com`的IP地址记录。如果有，则直接返回给终端用户；如果没有，则向授权DNS查询。                  

- 当授权DNS解析`www.a.com`时，返回域名CNAME `www.a.tbcdn.com`对应IP地址。                  

- 域名解析请求发送至阿里云DNS调度系统，并为请求分配最佳节点IP地址。

- LDNS获取DNS返回的解析IP地址。

- 用户获取解析IP地址。

- 用户向获取的IP地址发起对该资源的访问请求。